<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ZnHoCn&#39;s Blog</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://znhocn.github.io/"/>
  <updated>2017-12-29T14:42:21.424Z</updated>
  <id>https://znhocn.github.io/</id>
  
  <author>
    <name>ZnHoCn</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Annual summary 2017</title>
    <link href="https://znhocn.github.io/posts/2017/12/30/Annual-summary-2017/"/>
    <id>https://znhocn.github.io/posts/2017/12/30/Annual-summary-2017/</id>
    <published>2017-12-30T14:11:09.000Z</published>
    <updated>2017-12-29T14:42:21.424Z</updated>
    
    <content type="html"><![CDATA[<script src="/crypto-js.js"></script><script src="/mcommon.js"></script><h3 id="encrypt-message">Please enter the password to read the blog.</h3><link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css"> <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap-theme.min.css"> <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script> <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> <div id="security"> <div> <div class="input-group"> <input type="text" class="form-control" aria-label="Enter the password." id="pass"/> <div class="input-group-btn"> <button type="button" class="btn btn-default" onclick="decryptAES()">Decrypt</button> </div> </div> </div> </div> <div id="encrypt-blog" style="display:none"> U2FsdGVkX19HKa2dxe/T7AJuHY30pC3iuYdsbtWV74c= </div>]]></content>
    
    <summary type="html">
    
      The article has been encrypted, please enter your password to view.&lt;br&gt;
    
    </summary>
    
    
      <category term="Annual summary" scheme="https://znhocn.github.io/tags/Annual-summary/"/>
    
  </entry>
  
  <entry>
    <title>Hacking IP Camera (和慧眼-C08)</title>
    <link href="https://znhocn.github.io/posts/2017/12/26/Hacking-IP-Camera-Hehuiyan-C08/"/>
    <id>https://znhocn.github.io/posts/2017/12/26/Hacking-IP-Camera-Hehuiyan-C08/</id>
    <published>2017-12-25T18:12:27.000Z</published>
    <updated>2017-12-30T16:20:55.196Z</updated>
    
    <content type="html"><![CDATA[<script src="/crypto-js.js"></script><script src="/mcommon.js"></script><h3 id="encrypt-message">2018/01/30 后公开内容</h3><link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css"> <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap-theme.min.css"> <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script> <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> <div id="security"> <div> <div class="input-group"> <input type="text" class="form-control" aria-label="Enter the password." id="pass"/> <div class="input-group-btn"> <button type="button" class="btn btn-default" onclick="decryptAES()">Decrypt</button> </div> </div> </div> </div> <div id="encrypt-blog" style="display:none"> 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 </div>]]></content>
    
    <summary type="html">
    
      The article has been encrypted, please enter your password to view.&lt;br&gt;
    
    </summary>
    
    
      <category term="Reverse Engineering" scheme="https://znhocn.github.io/tags/Reverse-Engineering/"/>
    
      <category term="Hacking" scheme="https://znhocn.github.io/tags/Hacking/"/>
    
      <category term="Hardware" scheme="https://znhocn.github.io/tags/Hardware/"/>
    
      <category term="IP Camera" scheme="https://znhocn.github.io/tags/IP-Camera/"/>
    
  </entry>
  
  <entry>
    <title>Hacking 飞利浦智能球泡灯</title>
    <link href="https://znhocn.github.io/posts/2017/12/17/Hacking-Philips-Smart-Led-Ball-Lamp/"/>
    <id>https://znhocn.github.io/posts/2017/12/17/Hacking-Philips-Smart-Led-Ball-Lamp/</id>
    <published>2017-12-16T18:12:11.000Z</published>
    <updated>2018-01-01T15:31:08.262Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://item.mi.com/1172100033.html" target="_blank" rel="external">飞利浦智能球泡灯</a>是一款可连接 WiFi 通过米家手机 APP 进行控制的小米 IoT 智能设备。<br><a id="more"></a></p>
<h2 id="1-拆解硬件"><a href="#1-拆解硬件" class="headerlink" title="1 拆解硬件"></a>1 拆解硬件</h2><p>拆解篇幅请参考 <a href="https://blog.hakr.xyz/posts/2017/12/08/Philips-Smart-Led-Ball-Lamp-Dismantling-and-Firmware-extraction/" target="_blank" rel="external">《米家的飞利浦智睿球泡灯拆解与固件提取》</a> 这篇文章。其控制模块用的是 <a href="http://espressif.com/zh-hans/products/hardware/esp8266ex/overview" target="_blank" rel="external">ESP8266</a> 系列里的 <a href="http://espressif.com/zh-hans/products/hardware/esp-wroom-02/overview" target="_blank" rel="external">ESP-WROOM-02</a> 模块。</p>
<h2 id="2-串口调试"><a href="#2-串口调试" class="headerlink" title="2 串口调试"></a>2 串口调试</h2><h3 id="2-1-硬件连接"><a href="#2-1-硬件连接" class="headerlink" title="2.1 硬件连接"></a>2.1 硬件连接</h3><p>拆下 WiFi 控制模块后去掉外面包的热缩管，用热风枪吹掉背面的一颗 R41 的贴片元件(否则无法调试这个模块)。</p>
<p><img src="//files.hakr.xyz/images/2017-12-08_01-0006.jpg" alt=""></p>
<p>再按下图所示在模块的对应针脚上焊上跳线接到面包板上，使用 USB to TTL 工具连接到电脑，通过虚拟终端进行调试。</p>
<p><img src="//files.hakr.xyz/images/2017-12-08_01-0007.png" alt=""></p>
<ul>
<li>注: 图上两个模式的接法是反的，<code>IO0</code> 接 <code>GND</code> 进入的是刷固件的模式，RTOS 不会启动。<code>IO0</code> 接 <code>3.3V</code> 时进入的是串口模式，可以看到调试信息。</li>
</ul>
<p><img src="//files.hakr.xyz/images/2017-12-08_01-0008.jpg" alt=""></p>
<h3 id="2-2-调试信息"><a href="#2-2-调试信息" class="headerlink" title="2.2 调试信息"></a>2.2 调试信息</h3><p>给模块设备上电后可以在虚拟终端上看到输出的启动信息，与简单的命令行控制台。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div></pre></td><td class="code"><pre><div class="line">state: 5 -&gt; 0 (0)</div><div class="line">rm 0</div><div class="line">pm close 7 0 0/18186986</div><div class="line">del if0</div><div class="line">usl</div><div class="line">sul 0 0</div><div class="line">disconnect from ssid WIFI_012345, reason 8</div><div class="line">▒▒*▒P*V▒▒ET▒▒▒▒T▒▒+▒▒u▒U+UZ▒Z▒T▒▒TQT▒QQ▒▒jP▒T▒▒u▒▒▒▒▒ZT▒(E▒▒▒▒Q▒Eu▒▒▒▒▒QB▒▒▒U*B▒u▒▒▒ZT▒(UE▒▒▒▒Q*Eu▒▒▒▒▒URB▒▒▒Օ▒▒▒▒ZT▒(UE▒▒▒▒Q▒▒E▒j*Q▒▒EQT+▒▒u▒▒▒Zյ▒▒jUJTE▒▒jU▒▒▒▒*U▒UT▒▒▒</div><div class="line"> ▒UT▒E▒▒▒uT</div><div class="line">           ▒▒▒▒▒▒UE▒▒▒TT▒U▒▒UU(Z▒UR▒▒▒▒UQ*Q▒UT*E▒▒P▒P▒Vխ▒A▒QQQT▒OS SDK ver: 1.5.0-dev(7f7a714) compiled @ May 15 2017 17:20:32</div><div class="line">phy ver: 1055_1, pp ver: 10.7</div><div class="line"></div><div class="line">rf cal sector: 507</div><div class="line">tcpip_task_hdl : 3fff2080, prio:10,stack:512</div><div class="line">idle_task_hdl : 3fff2140,prio:0, stack:384</div><div class="line">tim_task_hdl : 3fff4980, prio:2,stack:512</div><div class="line">reset reason: 4</div><div class="line">08:00:00.003 [PT] Booting into normal mode...</div><div class="line">08:00:00.003 [PT] DeviceId: ZigBee Node, Dimmable Light</div><div class="line">pwm version:1.0.2</div><div class="line">08:00:00.003 [PT] RESTORE EVENT</div><div class="line">08:00:04.439 [PT] pSwitchOnRstCount: 1</div><div class="line">08:00:04.440 [PT] power on: bri 254</div><div class="line">08:00:04.440 [PT] power on: cct 5700</div><div class="line">08:00:04.440 [PT] StartUp to light</div><div class="line">data  : 0x3ffe8000 ~ 0x3ffe8abc, len: 2748</div><div class="line">rodata: 0x3ffe8b90 ~ 0x3ffeae18, len: 8840</div><div class="line">bss   : 0x3ffeae18 ~ 0x3fff1ea0, len: 28808</div><div class="line">heap  : 0x3fff1ea0 ~ 0x40000000, len: 57696</div><div class="line"></div><div class="line">_|      _|  _|_|_|  _|_|_|    _|_|</div><div class="line">_|_|  _|_|    _|      _|    _|    _|</div><div class="line">_|  _|  _|    _|      _|    _|    _|</div><div class="line">_|      _|    _|      _|    _|    _|</div><div class="line">_|      _|  _|_|_|  _|_|_|    _|_|</div><div class="line">psm init success</div><div class="line">OTP read OK</div><div class="line">JENKINS BUILD NUMBER: N/A</div><div class="line">BUILD TIME: Jun 12 2017,10:09:36</div><div class="line">MIIO APP VER: 1.3.0_0033</div><div class="line">MIIO MCU VER: N/A</div><div class="line">MIIO WIFI VER: 1.5.0-dev(7f7a714)</div><div class="line">MIIO DID: 60566054</div><div class="line">MIIO WIFI MAC: 34ce0099b601</div><div class="line">free_heap[after init]: 12432</div><div class="line">*****xiaomi init pass*****</div><div class="line">mode : sta(34:ce:00:99:b6:01)</div><div class="line">add if0</div><div class="line">scandone</div><div class="line">state: 0 -&gt; 2 (b0)</div><div class="line">state: 2 -&gt; 3 (0)</div><div class="line">state: 3 -&gt; 5 (10)</div><div class="line">add 0</div><div class="line">aid 6</div><div class="line">pm open phy_2,type:2 0 0</div><div class="line">cnt</div><div class="line"></div><div class="line">connected with WIFI_012345, channel 11</div><div class="line">dhcp client start...</div><div class="line">connect to ssid WIFI_012345, channel 11</div><div class="line">wifi phy mode: 3</div><div class="line">ip:192.168.2.109,mask:255.255.255.0,gw:192.168.2.2</div><div class="line">ip:192.168.2.109,mask:255.255.255.0,gw:192.168.2.2</div><div class="line"></div><div class="line">help    // 输入 help 命令</div><div class="line">Debug commandlist</div><div class="line">=================</div><div class="line">[command]               [ARG]</div><div class="line">----------------------- -------------</div><div class="line">help</div><div class="line">reboot</div><div class="line">restore</div><div class="line">setwifi                 ARG: &lt;&quot;ssid&quot;&gt; &lt;&quot;passwd&quot;&gt;  RET: ok/ error</div><div class="line">getwifi                 ARG: none RET: &lt;&quot;ssid&quot;&gt; &lt;rssi&gt; / error</div><div class="line">gettemp                 ARG: get temperature data</div><div class="line">stop_mcmd               ARG: stop miio cmd RET: none</div><div class="line">model                   ARG: &lt;model_string&gt; RET: &lt;model&gt;</div><div class="line">getversion              ARG: get firmware version</div><div class="line">getheap                 ARG: get heap: ok/error</div><div class="line">mac                     ARG: none RET: ok/error</div><div class="line">bri                     ARG: bright pwm test, 0-100 RET: ok/error</div><div class="line">cct                     ARG: cct pwm test, 0-100 RET: ok/error</div><div class="line">setcct                  ARG: cct control test, 0-100 RET: ok/error</div><div class="line">setbri                  ARG: bri control test, 0-100 RET: ok/error</div><div class="line">setbricct               ARG: bri and cct control test, 0-100 RET: ok/error</div><div class="line">applyscene              ARG: apply scene: ok/error</div><div class="line"></div><div class="line">......</div></pre></td></tr></table></figure>
<h2 id="3-网络调试"><a href="#3-网络调试" class="headerlink" title="3 网络调试"></a>3 网络调试</h2><p>网络调试我们需要用到一个可以使用命令行控制并带有 <code>tcpdump</code> 的 WiFi 路由器实现进/出数据包的抓取和 LAN Tap 工具实现进/出数据包的实时查看+抓取。<br>无线路由器一般使用 OpenWrt 系统的无线路由器都支持，这个我使用的是中国版的 WiFi Pineapple。</p>
<h2 id="4-固件提取"><a href="#4-固件提取" class="headerlink" title="4 固件提取"></a>4 固件提取</h2><ul>
<li>请参考 <a href="https://blog.hakr.xyz/posts/2017/12/08/Philips-Smart-Led-Ball-Lamp-Dismantling-and-Firmware-extraction/" target="_blank" rel="external">《米家的飞利浦智睿球泡灯拆解与固件提取》</a></li>
</ul>
<h2 id="5-固件逆向"><a href="#5-固件逆向" class="headerlink" title="5 固件逆向"></a>5 固件逆向</h2><p><a href="http://espressif.com/zh-hans/products/hardware/esp8266ex/overview" target="_blank" rel="external">ESP8266</a> 芯片使用的是 <a href="https://en.wikipedia.org/wiki/Tensilica" target="_blank" rel="external">Xtensa</a>。</p>
<h3 id="5-1-使用-IDA"><a href="#5-1-使用-IDA" class="headerlink" title="5.1 使用 IDA"></a>5.1 使用 IDA</h3><p>IDA Pro 本身并不支持对 Xtensa 架构的反汇编，需要安装 <a href="https://github.com/themadinventor/ida-xtensa" target="_blank" rel="external">ida-xtensa</a> 这个第三方的插件来实现反汇编的功能。<br>ida-xtensa 插件目前仅支持 IDA Pro 6.6 以上的版本，但在最新的 IDA Pro 7.0 上使用会报错，本人后来使用的是 IDA Pro 6.8。<br>下载 ida-xtensa 插件把 <code>xtensa.py</code> 文件复制到 IDA Pro 安装目录里的 <code>procs/</code> 文件夹里后重新打开 IDA Pro。</p>
<p><img src="//files.hakr.xyz/images/2017-12-17_01-0001.png" alt=""><br><img src="//files.hakr.xyz/images/2017-12-17_01-0002.png" alt=""></p>
<h3 id="5-2-使用-Radare2"><a href="#5-2-使用-Radare2" class="headerlink" title="5.2 使用 Radare2"></a>5.2 使用 Radare2</h3><p>Radare2 原生支持对 Xtensa 架构的反汇编(并非所有版本都支持)。</p>
<p>查看当前的 Radare2 是否支持 Xtensa 架构反汇编</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ rasm2 -L | grep xtensa</div><div class="line">_dAe  32         xtensa      GPL3    XTensa CPU</div></pre></td></tr></table></figure>
<p>使用 Radare2 打开固件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ r2 <span class="_">-a</span> xtensa flash_0.bin</div></pre></td></tr></table></figure>
<p><img src="//files.hakr.xyz/images/2017-12-17_01-0003.png" alt=""></p>
<blockquote>
<p>目前本人的 Xtensa 汇编指令能力有限，后续的反汇编分析内容暂时写不出来。。。</p>
</blockquote>
<h3 id="5-3-固件移植"><a href="#5-3-固件移植" class="headerlink" title="5.3 固件移植"></a>5.3 固件移植</h3><p>尝试将之前 Dump 出来的固件移植到到 ESP8266 的开发板，但启动时在虚拟终端上看到了如下的报错信息循环传输。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"> ets Jan  8 2013,rst cause:2, boot mode:(3,7)</div><div class="line"></div><div class="line">load 0x40100000, len 2416, room 16</div><div class="line">tail 0</div><div class="line">chksum 0x01</div><div class="line">load 0x3ffe8000, len 764, room 8</div><div class="line">tail 4</div><div class="line">chksum 0x60</div><div class="line">load 0x3ffe82fc, len 792, room 4</div><div class="line">tail 4</div><div class="line">chksum 0xee</div><div class="line">csum 0xee</div><div class="line"></div><div class="line">2nd boot version : 1.6.1(30daab7)</div><div class="line">  SPI Speed      : 40MHz</div><div class="line">  SPI Mode       : DIO</div><div class="line">  SPI Flash Size &amp; Map: 32Mbit(512KB+512KB)</div><div class="line">jump to run user1 @ 1000</div><div class="line"></div><div class="line">OS SDK ver: 1.5.0-dev(7f7a714) compiled @ May 15 2017 17:20:32</div><div class="line">rf_cal[0] !=0x05,is 0x00</div></pre></td></tr></table></figure>
<p>这是由于固件是从 ESP8266 系列里的 ESP-WROOM-02 模块里 Dump 出来的，我使用的 ESP8266 开发板是基于 ESP-12E 的，虽然两个模块使用的处理芯片是一个型号的，<br>但两个模块使用 Flash 并不一样，ESP-WROOM-02 的 Flash 大小是 <code>2MB</code>，ESP-12E 使用的 Flash 是 <code>4MB</code> 固件无法识别正确的存储空间导致无法正常启动，这跟开发有关，并非所有固件都这样。<br>于是我又重新买了一个基于 ESP-WROOM-02 模块的开发板重新尝试。</p>
<p><img src="//files.hakr.xyz/images/" alt=""></p>
<p>给开发板上电后在虚拟终端上没看到之前的报错，但又遇到新的报错信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">▒~1A▒|▒▒▒,▒h▒▒X▒OS SDK ver: 1.5.0-dev(7f7a714) compiled @ May 15 2017 17:20:32A▒▒*E(a▒▒▒ (▒dA#I-Aea*U▒I,!▒k▒t▒&#123;▒S&#123;`K</div><div class="line">phy ver: 1055_1, pp ver: 10.7</div><div class="line"></div><div class="line">rf cal sector: 1019</div><div class="line">tcpip_task_hdl : 3fff2080, prio:10,stack:512</div><div class="line">idle_task_hdl : 3fff2140,prio:0, stack:384</div><div class="line">tim_task_hdl : 3fff4980, prio:2,stack:512</div><div class="line">reset reason: 4</div><div class="line">08:00:00.004 [PT] Booting into normal mode...</div><div class="line">08:00:00.004 [PT] DeviceId: ZigBee Node, Dimmable Light</div><div class="line">pwm version:1.0.2</div><div class="line">08:00:00.005 [PT] RESTORE EVENT</div><div class="line">08:00:00.007 [PT] pSwitchOnRstCount: 1</div><div class="line">08:00:00.007 [PT] power on: bri 254</div><div class="line">08:00:00.007 [PT] power on: cct 5700</div><div class="line">08:00:00.007 [PT] StartUp to light</div><div class="line">data  : 0x3ffe8000 ~ 0x3ffe8abc, len: 2748</div><div class="line">rodata: 0x3ffe8b90 ~ 0x3ffeae18, len: 8840</div><div class="line">bss   : 0x3ffeae18 ~ 0x3fff1ea0, len: 28808</div><div class="line">heap  : 0x3fff1ea0 ~ 0x40000000, len: 57696</div><div class="line"></div><div class="line">_|      _|  _|_|_|  _|_|_|    _|_|</div><div class="line">_|_|  _|_|    _|      _|    _|    _|</div><div class="line">_|  _|  _|    _|      _|    _|    _|</div><div class="line">_|      _|    _|      _|    _|    _|</div><div class="line">_|      _|  _|_|_|  _|_|_|    _|_|</div><div class="line">psm init success</div><div class="line">error: OTP read error, -2</div></pre></td></tr></table></figure>
<p>提示的是 OTP 读取错误。我在 <a href="http://wiki.jackslab.org/ESP8266_Memory_Map#dport0" target="_blank" rel="external">ESP8266 Memory Map</a> 里找到了 OTP 地址的信息，是厂商烧录在芯片里的只读数据，这里存储着硬件的 MAC 地址。<br>我在硬件的 Flash 模式下使用 <code>esptool.py</code> 读取了这个地址块的数据，正好与设备的 MAC 地址吻合，</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">$ esptool.py -p /dev/ttyUSB0 dump_mem 0x3FF00000 256 dport0_1.bin</div><div class="line">$ xxd dport0_1.bin</div><div class="line">0000000: 0000 0000 0000 0000 0f08 0000 0300 0000  ................</div><div class="line">0000010: 0000 0000 0000 0000 ff00 ffff 0000 0000  ................</div><div class="line">0000020: 0000 0000 0600 0000 0000 0000 0000 0000  ................</div><div class="line">0000030: 4040 0000 0000 0000 4108 0000 0000 0000  @@......A.......</div><div class="line">0000040: 0000 0000 0000 0000 0000 0000 0000 0000  ................</div><div class="line">0000050: ccb4 2601 b699 1372 26ba c239 00ce 3480  ..&amp;....r&amp;..9..4.</div><div class="line">0000060: 0000 0000 0000 0000 0000 0000 0000 0000  ................</div><div class="line">0000070: 0000 0000 0000 0000 0000 0000 0000 0000  ................</div><div class="line">0000080: 0000 0000 0000 0000 0000 0000 0000 0000  ................</div><div class="line">0000090: 0000 0000 0000 0000 0000 0000 0000 0000  ................</div><div class="line">00000a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................</div><div class="line">00000b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................</div><div class="line">00000c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................</div><div class="line">00000d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................</div><div class="line">00000e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................</div><div class="line">00000f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................</div></pre></td></tr></table></figure>
<ul>
<li>结论: 小米进行开发时使用了 OTP 地址的数据作为硬件的验证，OTP 保存的是 MAC 地址，且设备的 MAC 地址厂商查询到的就是小米，所以除非修改固件跳过这个验证否则无法成功移植到其他厂商生产的同型号的模块上。</li>
</ul>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://habrahabr.ru/post/255135/" target="_blank" rel="external">Reverse Engineering ESP8266 — часть 1</a></li>
<li><a href="https://habrahabr.ru/post/255153/" target="_blank" rel="external">Reverse Engineering ESP8266 — часть 2</a></li>
<li><a href="https://dustri.org/b/solving-game2-from-the-badge-of-black-alps-2017-with-radare2.html" target="_blank" rel="external">Solving game2 from the badge of Black Alps 2017 with radare2</a></li>
<li><a href="http://wiki.jackslab.org/ESP8266_Memory_Map" target="_blank" rel="external">ESP8266 Memory Map</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://item.mi.com/1172100033.html&quot;&gt;飞利浦智能球泡灯&lt;/a&gt;是一款可连接 WiFi 通过米家手机 APP 进行控制的小米 IoT 智能设备。&lt;br&gt;
    
    </summary>
    
    
      <category term="ESP8266" scheme="https://znhocn.github.io/tags/ESP8266/"/>
    
      <category term="Hacking" scheme="https://znhocn.github.io/tags/Hacking/"/>
    
      <category term="Hardware" scheme="https://znhocn.github.io/tags/Hardware/"/>
    
  </entry>
  
  <entry>
    <title>米家的飞利浦智睿球泡灯拆解与固件提取</title>
    <link href="https://znhocn.github.io/posts/2017/12/08/Philips-Smart-Led-Ball-Lamp-Dismantling-and-Firmware-extraction/"/>
    <id>https://znhocn.github.io/posts/2017/12/08/Philips-Smart-Led-Ball-Lamp-Dismantling-and-Firmware-extraction/</id>
    <published>2017-12-08T10:51:54.000Z</published>
    <updated>2017-12-17T13:01:21.850Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://item.mi.com/1172100033.html" target="_blank" rel="external">飞利浦智睿球泡灯</a>是一款可连接 WiFi 的小米智能设备，可通过米家手机应用进行控制。通过外包装上的 <a href="https://fccid.io/CMIIT-ID-2016DP3252" target="_blank" rel="external">CMIIT-ID: 2016DP3252</a> 号可查询到其使用的控制芯片是 ESP8266 系列里的 <a href="http://espressif.com/zh-hans/products/hardware/esp-wroom-02/overview" target="_blank" rel="external">ESP-WROOM-02</a> 模块。<br><a id="more"></a></p>
<h1 id="1-设备拆解"><a href="#1-设备拆解" class="headerlink" title="1 设备拆解"></a>1 设备拆解</h1><h2 id="1-1-打开灯罩"><a href="#1-1-打开灯罩" class="headerlink" title="1.1 打开灯罩"></a>1.1 打开灯罩</h2><p>使用热风枪先把粘胶加热一下，对着粘合处灯泡转着吹，别一直吹一个点否则会直接融化灯罩。</p>
<p>加热的差不多的时候可以用手掰开一条缝隙，拿可以撬的工具沿着边一点点撬开，这里使用开夏威夷果的钥匙挺方便的。</p>
<p><img src="//files.hakr.xyz/images/2017-12-08_01-0001.jpg" alt=""></p>
<h2 id="1-2-拆除-LED-板"><a href="#1-2-拆除-LED-板" class="headerlink" title="1.2 拆除 LED 板"></a>1.2 拆除 LED 板</h2><p>先用电烙铁拆焊掉 3 根导线，再把 LED 板撬下来，板与底座是胶粘合的，可以尝试先加热一下再撬。</p>
<p><img src="//files.hakr.xyz/images/2017-12-08_01-0002.jpg" alt=""></p>
<h2 id="1-3-取出电源与控制模块"><a href="#1-3-取出电源与控制模块" class="headerlink" title="1.3 取出电源与控制模块"></a>1.3 取出电源与控制模块</h2><p>电源模块与控制模块是焊在一起的，被一颗胶粘着与底座固定。需要用美工刀把这颗胶割开，再把整个模块向外拉。底部的零线和火线与灯座的金属接触部分并非是焊接上的而是卡住的，拉的时候用点力，多拉几次就能取出来。</p>
<p><img src="//files.hakr.xyz/images/2017-12-08_01-0003.jpg" alt=""></p>
<h2 id="1-4-拆下-WiFi-控制模块"><a href="#1-4-拆下-WiFi-控制模块" class="headerlink" title="1.4 拆下 WiFi 控制模块"></a>1.4 拆下 WiFi 控制模块</h2><p>WiFi 控制模块是通过 4 个针脚焊接在电源模块上的，需要用电烙铁来拆下它。</p>
<p><img src="//files.hakr.xyz/images/2017-12-08_01-0004.jpg" alt=""><br><img src="//files.hakr.xyz/images/2017-12-08_01-0005.jpg" alt=""></p>
<h2 id="1-5-焊接跳线"><a href="#1-5-焊接跳线" class="headerlink" title="1.5 焊接跳线"></a>1.5 焊接跳线</h2><p>拆下 WiFi 控制模块后去掉外面包的热缩管，再用热风枪吹掉背面的一颗 R41 的贴片元件(否则无法调试这个模块)。</p>
<p><img src="//files.hakr.xyz/images/2017-12-08_01-0006.jpg" alt=""></p>
<p>再按下图所示在模块的对应针脚上焊上跳线接到面包板上 </p>
<ul>
<li>注: 图上两个模式的接法是反的，<code>IO0</code> 接 <code>GND</code> 进入的是刷固件的模式，RTOS 不会启动。<code>IO0</code> 接 <code>3.3V</code> 时进入的是串口模式，可以看到调试信息。</li>
</ul>
<p><img src="//files.hakr.xyz/images/2017-12-08_01-0007.png" alt=""><br><img src="//files.hakr.xyz/images/2017-12-08_01-0008.jpg" alt=""></p>
<h1 id="2-固件提取"><a href="#2-固件提取" class="headerlink" title="2 固件提取"></a>2 固件提取</h1><h2 id="2-1-安装工具软件"><a href="#2-1-安装工具软件" class="headerlink" title="2.1 安装工具软件"></a>2.1 安装工具软件</h2><p>WiFi 控制模块是 ESP8266 的芯片，这里我们使用 <a href="https://github.com/espressif/esptool" target="_blank" rel="external">esptool</a> 这个工具。<br>这是一个 <a href="https://www.python.org/" target="_blank" rel="external">Python</a> 写的工具所以你需要先安装 <code>python</code> 和 <code>python-pip</code> 再用 <code>pip</code> 安装 <code>esptool</code> 。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install esptool</div></pre></td></tr></table></figure>
<h2 id="2-2-固件提取操作"><a href="#2-2-固件提取操作" class="headerlink" title="2.2 固件提取操作"></a>2.2 固件提取操作</h2><p>使用 USB to TTL 工具 (建议使用 CP2102 芯片的) 把设备连接到你的电脑找到设备的串口号。</p>
<p>查看模块上的 Flash 芯片信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># esptool.py -p COM3 flash_id</span></div><div class="line"></div><div class="line">esptool.py v2.2</div><div class="line">Connecting....</div><div class="line">Detecting chip type... ESP8266</div><div class="line">Chip is ESP8266EX</div><div class="line">Uploading stub...</div><div class="line">Running stub...</div><div class="line">Stub running...</div><div class="line">Manufacturer: c8</div><div class="line">Device: 4015</div><div class="line">Detected flash size: 2MB    // 这个可以看到 Flash 芯片的大小是 2MB</div><div class="line">Hard resetting...</div></pre></td></tr></table></figure>
<p>读取芯片数据到文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">esptool.py -p COM3 read_flash 0x00000 0x200000 flash_0.bin    // 0x00000 是起始地址， 0x200000 是结束地址，这里所指定 dump 的大小是 2MB</div></pre></td></tr></table></figure>
<p>一些使用示例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">esptool.py -p COM3 chip_id    // 查看主控芯片信息</div><div class="line">esptool.py -p COM3 flash_id    // 查看 Flash 信息</div><div class="line">esptool.py -p COM3 read_mac    // 查看 MAC 地址</div><div class="line">esptool.py -p COM3 image_info my_app.bin    // 读取二进制固件文件的信息</div><div class="line">esptool.py -p COM3 dump_mem 0x3FF00000 65552 dport0_0.bin    // dump 芯片内 Dport0 地址块的数据到文件</div><div class="line">esptool.py -p COM3 dump_mem 0x3ffe8000 2748 data_0.bin</div><div class="line">esptool.py -p COM3 dump_mem 0x3ffe8b90 8840 rodata_0.bin</div><div class="line">esptool.py -p COM3 dump_mem 0x3ffeae18 28808 bss_0.bin</div><div class="line">esptool.py -p COM3 dump_mem 0x3fff1ea0 57696 heap_0.bin</div><div class="line">esptool.py -p COM3 dump_mem 0x40000000 65536 iram_0.bin</div><div class="line">esptool.py -p COM3 read_flash_status    // 查看 Flash 状态</div><div class="line">esptool.py -p COM3 read_flash 0x00000 0x100000 flash_0.bin   // dump 1MB 大小的 Flash 数据到文件</div><div class="line">esptool.py -p COM3 read_flash 0x00000 0x200000 flash_0.bin   // 2MB</div><div class="line">esptool.py -p COM3 read_flash 0x00000 0x400000 flash_0.bin   // 4MB</div><div class="line">esptool.py -p COM3 read_flash 0x00000 0x800000 flash_0.bin   // 4MB</div><div class="line">esptool.py -p COM3 read_flash 0x00000 0x1600000 flash_0.bin  // 16MB</div><div class="line">esptool.py -p COM3 erase_flash    // 擦除 Flash 芯片上的所有数据</div><div class="line">esptool.py -p COM3 write_flash 0x00000 my_app.bin    // 写入新固件到 Flash</div></pre></td></tr></table></figure>
<p>更多用法去查看帮助</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">esptool.py help</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://item.mi.com/1172100033.html&quot;&gt;飞利浦智睿球泡灯&lt;/a&gt;是一款可连接 WiFi 的小米智能设备，可通过米家手机应用进行控制。通过外包装上的 &lt;a href=&quot;https://fccid.io/CMIIT-ID-2016DP3252&quot;&gt;CMIIT-ID: 2016DP3252&lt;/a&gt; 号可查询到其使用的控制芯片是 ESP8266 系列里的 &lt;a href=&quot;http://espressif.com/zh-hans/products/hardware/esp-wroom-02/overview&quot;&gt;ESP-WROOM-02&lt;/a&gt; 模块。&lt;br&gt;
    
    </summary>
    
    
      <category term="ESP8266" scheme="https://znhocn.github.io/tags/ESP8266/"/>
    
      <category term="Firmware" scheme="https://znhocn.github.io/tags/Firmware/"/>
    
      <category term="Mijia" scheme="https://znhocn.github.io/tags/Mijia/"/>
    
  </entry>
  
  <entry>
    <title>如何获取 YouTube 4K 视频</title>
    <link href="https://znhocn.github.io/posts/2017/08/15/How-to-Get-YouTube-4K-Videos/"/>
    <id>https://znhocn.github.io/posts/2017/08/15/How-to-Get-YouTube-4K-Videos/</id>
    <published>2017-08-15T08:34:53.000Z</published>
    <updated>2017-08-15T09:02:26.080Z</updated>
    
    <content type="html"><![CDATA[<p>通常能下载到清晰度最高的 YouTube 视频都是 720p 的，720p 以上的都是视频与音频是单独分开的，需要自己在本地手动合并成一个文件。<br><a id="more"></a><br>对于获取 YouTube 视频的下载链接可以使用第三方提供的服务来获取下载连接。比如: <a href="http://megavn.com/" target="_blank" rel="external">Download Youtube Online</a><br>通过第三方工具从 YouTube 下载的视频一般分为 2 种格式，<code>MP4</code> 与 <code>WebM</code> ，4K (2160p) 的视频使用是 <code>WebM</code> 格式的，音频有 <code>m4a</code>, <code>mp3</code>, <code>aac</code>, <code>wav</code> 几种格式。<br>当把 4K 的视频文件和音频文件下载到本地后需要使用 <a href="https://www.ffmpeg.org/" target="_blank" rel="external">FFmpeg</a> 对其转码与合并成一个新的 <code>MP4</code> 文件。</p>
<h3 id="转码-WebM-to-MP4"><a href="#转码-WebM-to-MP4" class="headerlink" title="转码 WebM to MP4"></a>转码 WebM to MP4</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ffmpeg -i input.webm -c:v libx264 output.mp4</div></pre></td></tr></table></figure>
<blockquote>
<p>WebM 格式的转码非常耗时。</p>
</blockquote>
<h3 id="合并-MP4-WAV-to-MP4"><a href="#合并-MP4-WAV-to-MP4" class="headerlink" title="合并 MP4 + WAV to MP4"></a>合并 MP4 + WAV to MP4</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ffmpeg -i input.mp4 -i input.wav -vcodec copy -acodec aac output.mp4</div></pre></td></tr></table></figure>
<h3 id="转码-合并"><a href="#转码-合并" class="headerlink" title="转码 + 合并"></a>转码 + 合并</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ffmpeg -i input.webm -i input.wav -c:a aac -c:v libx264 output.mp4</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;通常能下载到清晰度最高的 YouTube 视频都是 720p 的，720p 以上的都是视频与音频是单独分开的，需要自己在本地手动合并成一个文件。&lt;br&gt;
    
    </summary>
    
    
      <category term="YouTube" scheme="https://znhocn.github.io/tags/YouTube/"/>
    
      <category term="4K" scheme="https://znhocn.github.io/tags/4K/"/>
    
  </entry>
  
  <entry>
    <title>Diary 2017-07-17</title>
    <link href="https://znhocn.github.io/posts/2017/07/17/Diary-2017-07-17/"/>
    <id>https://znhocn.github.io/posts/2017/07/17/Diary-2017-07-17/</id>
    <published>2017-07-16T18:40:41.000Z</published>
    <updated>2017-07-16T18:54:31.565Z</updated>
    
    <content type="html"><![CDATA[<script src="/crypto-js.js"></script><script src="/mcommon.js"></script><h3 id="encrypt-message">Enter password to read.</h3><link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css"> <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap-theme.min.css"> <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script> <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> <div id="security"> <div> <div class="input-group"> <input type="text" class="form-control" aria-label="Enter the password." id="pass"/> <div class="input-group-btn"> <button type="button" class="btn btn-default" onclick="decryptAES()">Decrypt</button> </div> </div> </div> </div> <div id="encrypt-blog" style="display:none"> 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 </div>]]></content>
    
    <summary type="html">
    
      The article has been encrypted, please enter your password to view.&lt;br&gt;
    
    </summary>
    
    
      <category term="Diary" scheme="https://znhocn.github.io/tags/Diary/"/>
    
  </entry>
  
  <entry>
    <title>Diary 2017-07-10</title>
    <link href="https://znhocn.github.io/posts/2017/07/10/Diary-2017-07-10/"/>
    <id>https://znhocn.github.io/posts/2017/07/10/Diary-2017-07-10/</id>
    <published>2017-07-10T13:59:08.000Z</published>
    <updated>2017-07-10T14:01:17.590Z</updated>
    
    <content type="html"><![CDATA[<script src="/crypto-js.js"></script><script src="/mcommon.js"></script><h3 id="encrypt-message">Enter password to read.</h3><link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css"> <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap-theme.min.css"> <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script> <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> <div id="security"> <div> <div class="input-group"> <input type="text" class="form-control" aria-label="Enter the password." id="pass"/> <div class="input-group-btn"> <button type="button" class="btn btn-default" onclick="decryptAES()">Decrypt</button> </div> </div> </div> </div> <div id="encrypt-blog" style="display:none"> U2FsdGVkX1/PFwA+0G+m/tv+JBCQDnW4kx2FBPO6zVFP5Sfi5VaSLmiY4kAK4BDHfRikJTPET3EWkxcx7MUyo1vaYLEfeCPd9nKPDhCi1Ew= </div>]]></content>
    
    <summary type="html">
    
      The article has been encrypted, please enter your password to view.&lt;br&gt;
    
    </summary>
    
    
      <category term="Diary" scheme="https://znhocn.github.io/tags/Diary/"/>
    
  </entry>
  
  <entry>
    <title>Diary 2017-07-07</title>
    <link href="https://znhocn.github.io/posts/2017/07/07/Diary-2017-07-07/"/>
    <id>https://znhocn.github.io/posts/2017/07/07/Diary-2017-07-07/</id>
    <published>2017-07-07T15:47:56.000Z</published>
    <updated>2017-07-10T13:53:02.745Z</updated>
    
    <content type="html"><![CDATA[<script src="/crypto-js.js"></script><script src="/mcommon.js"></script><h3 id="encrypt-message">Enter password to read.</h3><link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css"> <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap-theme.min.css"> <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script> <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> <div id="security"> <div> <div class="input-group"> <input type="text" class="form-control" aria-label="Enter the password." id="pass"/> <div class="input-group-btn"> <button type="button" class="btn btn-default" onclick="decryptAES()">Decrypt</button> </div> </div> </div> </div> <div id="encrypt-blog" style="display:none"> U2FsdGVkX1+49oTmTI/wfeSZJLAKjm9UiA1xU7tXDCahI8wHsCl/URHvzLY8w0liCthp3E2eYFQXnA3XpdhC9YWbGuRBPk1EuUnv6EzjtM5UkD/aUrs/CnezUfb72GlHHBR8xxPwPw1K3M/s/y6Dg7KZD6hZrlb8mK3LfxOp19k/ABrt/YpboKAfFEIIaAeF8TncEcmlTICfEVspxYJsZXWWHF7Z0hGwVb1d4cW7ZZNpF98cWhl4O0W6EC+ByWefwcyNlk5o6tpWR4hzXg2GARNm2nBuCGil4KiPMMSO/I1e+6Yf4daN4Wp/rIw/yAT7ysIZIcfw76C7FyFfreBodyKpE9Lu3CCutyJLW/VULcOcMIEDr3E2alNBHaH5Widrao47Hu7tZQM/GMrE7N2bHQYRt+feZW8VDUi/ft1/vxKsMx4WHgj1vQcimabeSysWXdBrg5HR8uY5JeKq7I557URveb6xnDjSlz6cthtjXC4jZemGpSAkiJx0oteblnm6ljVD3vPiRBqvjF0s0XtKnOPN6gaZ6ZuqkdTRHYHS6MejWtOfhfr4/BJDq+x5Qm/owXACFYl6GuKZ0JH0BwBwNh+g3teXwnfnWOSQpLRO804LxrcUwK7eBpwiOIEOrZbBfJq5L9ZYgpY7Cex/6zAjJlL5CzLOlSUKG3daXWMH+h/r5XQ0SN2FpPXE3k1sA7mX8FBcEPWgSUumAMG1XVAT8M5X8OqFfW64/4OjK4OiKPnHhdVc2uLxhLRMyflvr5VTqkA3+vgjuIrAGXJIMdSSa1PVcBL3uuLSxKaiiXBB58XMMOBLUp4QZjqQ7of5mmRF </div>]]></content>
    
    <summary type="html">
    
      The article has been encrypted, please enter your password to view.&lt;br&gt;
    
    </summary>
    
    
      <category term="Diary" scheme="https://znhocn.github.io/tags/Diary/"/>
    
  </entry>
  
  <entry>
    <title>YubiKey 4 PGP 功能使用教程</title>
    <link href="https://znhocn.github.io/posts/2017/06/03/YubiKey-4-GPG-Tutorial/"/>
    <id>https://znhocn.github.io/posts/2017/06/03/YubiKey-4-GPG-Tutorial/</id>
    <published>2017-06-02T16:23:15.000Z</published>
    <updated>2017-06-05T19:27:00.989Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.yubico.com/" target="_blank" rel="external">YubiKey</a> 是一款用于安全认证的硬件工具，其中的 YubiKey 4, YubiKey 4 Nano, YubiKey 4C, YubiKey NEO, YubiKey NEO-n，这些产品型号是包含 OpenPGP Card 功能的。</p>
<p>你可将你的私钥移动到 YubiKey 里，在需要使用的时候插上，而不必担心私钥泄露或被恶意程序盗取，并且支持在多种操作系统上使用。</p>
<a id="more"></a>
<h2 id="1、生成密钥对"><a href="#1、生成密钥对" class="headerlink" title="1、生成密钥对"></a>1、生成密钥对</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line">$ gpg --gen-key</div><div class="line"></div><div class="line">gpg (GnuPG) 2.0.30; Copyright (C) 2015 Free Software Foundation, Inc.</div><div class="line">This is free software: you are free to change and redistribute it.</div><div class="line">There is NO WARRANTY, to the extent permitted by law.</div><div class="line"></div><div class="line">Please select what kind of key you want:</div><div class="line">   (1) RSA and RSA (default)</div><div class="line">   (2) DSA and Elgamal</div><div class="line">   (3) DSA (sign only)</div><div class="line">   (4) RSA (sign only)</div><div class="line">Your selection? 1  // 输入 1 选择默认的 RSA 加密算法</div><div class="line">RSA keys may be between 1024 and 4096 bits long.</div><div class="line">What keysize <span class="keyword">do</span> you want? (2048) 4096</div><div class="line">Requested keysize is 4096 bits</div><div class="line">Please specify how long the key should be valid.</div><div class="line">         0 = key does not expire</div><div class="line">      &lt;n&gt;  = key expires <span class="keyword">in</span> n days</div><div class="line">      &lt;n&gt;w = key expires <span class="keyword">in</span> n weeks</div><div class="line">      &lt;n&gt;m = key expires <span class="keyword">in</span> n months</div><div class="line">      &lt;n&gt;y = key expires <span class="keyword">in</span> n years</div><div class="line">Key is valid <span class="keyword">for</span>? (0)  // 直接回车选择 0 默认永不过期</div><div class="line">Key does not expire at all</div><div class="line">Is this correct? (y/N) y  // 输入 y 确定 下一步</div><div class="line"></div><div class="line">GnuPG needs to construct a user ID to identify your key.</div><div class="line"></div><div class="line">Real name: Test User  // 输入你的姓名</div><div class="line">Email address: <span class="built_in">test</span>@example.com  // 输入你的邮箱</div><div class="line">Comment:  // 输入你的附加信息，可以是你的网络 ID 名称，或者直接回车跳过</div><div class="line">You selected this USER-ID:</div><div class="line">    <span class="string">"Test User &lt;test@example.com&gt;"</span></div><div class="line"></div><div class="line">Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? o  // 输入 o 回车后会要求你设置一个私钥的密码</div><div class="line">You need a Passphrase to protect your secret key.</div><div class="line"></div><div class="line">We need to generate a lot of random bytes. It is a good idea to perform</div><div class="line">some other action (<span class="built_in">type</span> on the keyboard, move the mouse, utilize the</div><div class="line">disks) during the prime generation; this gives the random number</div><div class="line">generator a better chance to gain enough entropy.</div><div class="line">We need to generate a lot of random bytes. It is a good idea to perform</div><div class="line">some other action (<span class="built_in">type</span> on the keyboard, move the mouse, utilize the</div><div class="line">disks) during the prime generation; this gives the random number</div><div class="line">generator a better chance to gain enough entropy.</div><div class="line">gpg: key A8C37A46 marked as ultimately trusted</div><div class="line">public and secret key created and signed.</div><div class="line"></div><div class="line">gpg: checking the trustdb</div><div class="line">gpg: 3 marginal(s) needed, 1 complete(s) needed, PGP trust model</div><div class="line">gpg: depth: 0  valid:   2  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 2u</div><div class="line">pub   4096R/F891791F 2017-05-29</div><div class="line">      Key fingerprint = 628C 7B5D D284 224A 3321  4369 BC71 9F68 F891 791F</div><div class="line">uid       [ultimate] Test User &lt;<span class="built_in">test</span>@example.com&gt;</div><div class="line">sub   4096R/46D4D220 2017-05-29</div></pre></td></tr></table></figure>
<h2 id="2、添加验证密钥"><a href="#2、添加验证密钥" class="headerlink" title="2、添加验证密钥"></a>2、添加验证密钥</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div></pre></td><td class="code"><pre><div class="line">$ gpg --expert --edit-key F891791F</div><div class="line"></div><div class="line">gpg (GnuPG) 2.0.30; Copyright (C) 2015 Free Software Foundation, Inc.</div><div class="line">This is free software: you are free to change and redistribute it.</div><div class="line">There is NO WARRANTY, to the extent permitted by law.</div><div class="line"></div><div class="line">Secret key is available.</div><div class="line"></div><div class="line">pub  4096R/F891791F  created: 2017-05-29  expires: never       usage: SC</div><div class="line">                     trust: ultimate      validity: ultimate</div><div class="line">sub  4096R/46D4D220  created: 2017-05-29  expires: never       usage: E</div><div class="line">[ultimate] (1). Test User &lt;<span class="built_in">test</span>@example.com&gt;</div><div class="line"></div><div class="line">gpg&gt; addkey</div><div class="line">This key is not protected.</div><div class="line">Please select what kind of key you want:</div><div class="line">   (3) DSA (sign only)</div><div class="line">   (4) RSA (sign only)</div><div class="line">   (5) Elgamal (encrypt only)</div><div class="line">   (6) RSA (encrypt only)</div><div class="line">   (7) DSA (<span class="built_in">set</span> your own capabilities)</div><div class="line">   (8) RSA (<span class="built_in">set</span> your own capabilities)</div><div class="line">Your selection? 8</div><div class="line"></div><div class="line">Possible actions <span class="keyword">for</span> a RSA key: Sign Encrypt Authenticate</div><div class="line">Current allowed actions: Sign Encrypt</div><div class="line"></div><div class="line">   (S) Toggle the sign capability</div><div class="line">   (E) Toggle the encrypt capability</div><div class="line">   (A) Toggle the authenticate capability</div><div class="line">   (Q) Finished</div><div class="line"></div><div class="line">Your selection? A</div><div class="line"></div><div class="line">Possible actions <span class="keyword">for</span> a RSA key: Sign Encrypt Authenticate</div><div class="line">Current allowed actions: Sign Encrypt Authenticate</div><div class="line"></div><div class="line">   (S) Toggle the sign capability</div><div class="line">   (E) Toggle the encrypt capability</div><div class="line">   (A) Toggle the authenticate capability</div><div class="line">   (Q) Finished</div><div class="line"></div><div class="line">Your selection? S</div><div class="line"></div><div class="line">Possible actions <span class="keyword">for</span> a RSA key: Sign Encrypt Authenticate</div><div class="line">Current allowed actions: Encrypt Authenticate</div><div class="line"></div><div class="line">   (S) Toggle the sign capability</div><div class="line">   (E) Toggle the encrypt capability</div><div class="line">   (A) Toggle the authenticate capability</div><div class="line">   (Q) Finished</div><div class="line"></div><div class="line">Your selection? E</div><div class="line"></div><div class="line">Possible actions <span class="keyword">for</span> a RSA key: Sign Encrypt Authenticate</div><div class="line">Current allowed actions: Authenticate</div><div class="line"></div><div class="line">   (S) Toggle the sign capability</div><div class="line">   (E) Toggle the encrypt capability</div><div class="line">   (A) Toggle the authenticate capability</div><div class="line">   (Q) Finished</div><div class="line"></div><div class="line">Your selection? Q</div><div class="line">RSA keys may be between 1024 and 4096 bits long.</div><div class="line">What keysize <span class="keyword">do</span> you want? (2048) 4096</div><div class="line">Requested keysize is 4096 bits</div><div class="line">Please specify how long the key should be valid.</div><div class="line">         0 = key does not expire</div><div class="line">      &lt;n&gt;  = key expires <span class="keyword">in</span> n days</div><div class="line">      &lt;n&gt;w = key expires <span class="keyword">in</span> n weeks</div><div class="line">      &lt;n&gt;m = key expires <span class="keyword">in</span> n months</div><div class="line">      &lt;n&gt;y = key expires <span class="keyword">in</span> n years</div><div class="line">Key is valid <span class="keyword">for</span>? (0)</div><div class="line">Key does not expire at all</div><div class="line">Is this correct? (y/N) y</div><div class="line">Really create? (y/N) y</div><div class="line">We need to generate a lot of random bytes. It is a good idea to perform</div><div class="line">some other action (<span class="built_in">type</span> on the keyboard, move the mouse, utilize the</div><div class="line">disks) during the prime generation; this gives the random number</div><div class="line">generator a better chance to gain enough entropy.</div><div class="line"></div><div class="line">pub  4096R/F891791F  created: 2017-05-29  expires: never       usage: SC</div><div class="line">                     trust: ultimate      validity: ultimate</div><div class="line">sub  4096R/46D4D220  created: 2017-05-29  expires: never       usage: E</div><div class="line">sub  4096R/C10AE6D4  created: 2017-05-29  expires: never       usage: A</div><div class="line">[ultimate] (1). Test User &lt;<span class="built_in">test</span>@example.com&gt;</div><div class="line"></div><div class="line">gpg&gt; q</div><div class="line">Save changes? (y/N) y</div></pre></td></tr></table></figure>
<h2 id="3、备份密钥"><a href="#3、备份密钥" class="headerlink" title="3、备份密钥"></a>3、备份密钥</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">gpg --armor --output public-key.asc --export F891791F  // 导出公钥到文件</div><div class="line">gpg --armor --output private-key.asc --export-secret-keys F891791F  // 导出私钥到文件</div><div class="line">gpg --armor --output subkeys-key.asc --export-secret-subkeys F891791F  // 导出子钥到文件</div></pre></td></tr></table></figure>
<h2 id="4、设置-OpenPGP-卡"><a href="#4、设置-OpenPGP-卡" class="headerlink" title="4、设置 OpenPGP 卡"></a>4、设置 OpenPGP 卡</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div></pre></td><td class="code"><pre><div class="line">$ gpg --card-edit</div><div class="line"></div><div class="line">Application ID ...: D2760001240102000060000000420000</div><div class="line">Version ..........: 2.1</div><div class="line">Manufacturer .....: Yubico</div><div class="line">Serial number ....: 00000042</div><div class="line">Name of cardholder: [not <span class="built_in">set</span>]</div><div class="line">Language prefs ...: [not <span class="built_in">set</span>]</div><div class="line">Sex ..............: unspecified</div><div class="line">URL of public key : [not <span class="built_in">set</span>]</div><div class="line">Login data .......: [not <span class="built_in">set</span>]</div><div class="line">Signature PIN ....: forced</div><div class="line">Key attributes ...: 2048R 2048R 2048R</div><div class="line">Max. PIN lengths .: 127 127 127</div><div class="line">PIN retry counter : 3 0 3</div><div class="line">Signature counter : 0</div><div class="line">Signature key ....: [none]</div><div class="line">Encryption key....: [none]</div><div class="line">Authentication key: [none]</div><div class="line">General key info..: [none]</div><div class="line"></div><div class="line">gpg/card&gt; admin  // 进入管理员模式</div><div class="line">Admin commands are allowed</div><div class="line"></div><div class="line">gpg/card&gt; passwd  // 设置密码</div><div class="line">gpg: OpenPGP card no. D2760001240102000060000000420000 detected</div><div class="line"></div><div class="line">1 - change PIN</div><div class="line">2 - unblock PIN</div><div class="line">3 - change Admin PIN</div><div class="line">4 - <span class="built_in">set</span> the Reset Code</div><div class="line">Q - quit</div><div class="line"></div><div class="line">Your selection? 1  // 输入 1 选择设置普通 PIN 码，默认的 PIN 码为 123456 如果是新设备或重置后的都是默认码。</div><div class="line">PIN changed.       // 设置时会先要求你输入普通 PIN 码的当前的密码，然后是设置新的 PIN 码，再是新的 PIN 码的二次确认。如果当前的 PIN 码输错 3 次就会被锁。</div><div class="line"></div><div class="line">1 - change PIN</div><div class="line">2 - unblock PIN</div><div class="line">3 - change Admin PIN</div><div class="line">4 - <span class="built_in">set</span> the Reset Code</div><div class="line">Q - quit</div><div class="line"></div><div class="line">Your selection? 3  // 输入 3 选择设置 Admin PIN 码，默认的 PIN 码为 12345678 如果是新设备或重置后的都是默认码。</div><div class="line">PIN changed.       // 设置时会先要求你输入 Admin PIN 码的当前的密码，然后是设置新的 PIN 码，再是新的 PIN 码的二次确认。如果当前的 PIN 码输错 3 次就会被锁。</div><div class="line"></div><div class="line">1 - change PIN</div><div class="line">2 - unblock PIN</div><div class="line">3 - change Admin PIN</div><div class="line">4 - <span class="built_in">set</span> the Reset Code</div><div class="line">Q - quit</div><div class="line"></div><div class="line">Your selection? 2  // （可选）输入 2 选择设置 unblock PIN 码，也就解锁码，用于在普通 PIN 码被锁后解锁并重置新的普通 PIN 码。unblock PIN 码只能用于解锁普通 PIN 码，无法用于 Admin PIN 码。</div><div class="line">PIN unblocked and new PIN set.  // 设置时会先要求你输入 Admin PIN 码的当前的密码，然后是设置新的 unblock PIN 码，再是新的 unblock PIN 码的二次确认。</div><div class="line"></div><div class="line">1 - change PIN</div><div class="line">2 - unblock PIN</div><div class="line">3 - change Admin PIN</div><div class="line">4 - <span class="built_in">set</span> the Reset Code</div><div class="line">Q - quit</div><div class="line"></div><div class="line">Your selection? q  // 输入 q 退出密码设置</div><div class="line"></div><div class="line">gpg/card&gt; name  // 设置姓名</div><div class="line">Cardholder<span class="string">'s surname: User  // 持卡人的姓</span></div><div class="line">Cardholder's given name: Test  // 持卡人的名字</div><div class="line"></div><div class="line">gpg/card&gt; lang  // 设置语言</div><div class="line">Language preferences: en</div><div class="line"></div><div class="line">gpg/card&gt; sex  // 设置性别 M 为男性 F 为女性</div><div class="line">Sex ((M)ale, (F)emale or space): m</div><div class="line"></div><div class="line">gpg/card&gt; url  // 设置公钥的网络链接</div><div class="line">URL to retrieve public key: https://www.example.com/public-key.asc  // 链接地址</div><div class="line"></div><div class="line">gpg/card&gt; login  // 设置用户名</div><div class="line">Login data (account name): <span class="built_in">test</span></div><div class="line"></div><div class="line">gpg/card&gt; </div><div class="line"></div><div class="line">Application ID ...: D2760001240102000060000000420000</div><div class="line">Version ..........: 2.1</div><div class="line">Manufacturer .....: Yubico</div><div class="line">Serial number ....: 00000042</div><div class="line">Name of cardholder: Test User</div><div class="line">Language prefs ...: en</div><div class="line">Sex ..............: male</div><div class="line">URL of public key : https://www.example.com/public-key.asc</div><div class="line">Login data .......: <span class="built_in">test</span></div><div class="line">Signature PIN ....: forced</div><div class="line">Key attributes ...: 2048R 2048R 2048R</div><div class="line">Max. PIN lengths .: 127 127 127</div><div class="line">PIN retry counter : 3 3 3  // 3 3 3 分别表示普通 PIN 码、unblock PIN 码、Admin PIN 码的输入错误计数器，默认为 3 输错一次减 1 ，减到 0 会被锁，被锁之前输入正确的 PIN 码会自动还原计数器。</div><div class="line">Signature counter : 0</div><div class="line">Signature key ....: [none]</div><div class="line">Encryption key....: [none]</div><div class="line">Authentication key: [none]</div><div class="line">General key info..: [none]</div><div class="line"></div><div class="line">gpg/card&gt; quit  // 退出 OpenPGP 卡设置</div></pre></td></tr></table></figure>
<ul>
<li>注：在 Yubikey 4 中引入了一个新功能，当用户输入正确的 PIN 码和 <strong>触摸硬件</strong> 后才会进行签名、解密或身份验证操作。具体参考 <a href="https://developers.yubico.com/PGP/Card_edit.html" target="_blank" rel="external">YubiKey 4 touch</a> 里的内容。</li>
</ul>
<h2 id="5、移动密钥到-YubiKey-4"><a href="#5、移动密钥到-YubiKey-4" class="headerlink" title="5、移动密钥到 YubiKey 4"></a>5、移动密钥到 YubiKey 4</h2><ul>
<li>注：OpenPGP Card 是支持在自身硬件上直接生成密钥对的，但多数使用 PGP 非对称加密的用户都有自己的密钥所以这里使用移动已有密钥到 YubiKey 里。直接在硬件上生成密钥对是在 admin 模式下使用 <code>generate</code> 命令，生成的密钥是无法导出备份的！</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div></pre></td><td class="code"><pre><div class="line">$ gpg --edit-key F891791F</div><div class="line"></div><div class="line">gpg (GnuPG) 2.0.30; Copyright (C) 2015 Free Software Foundation, Inc.</div><div class="line">This is free software: you are free to change and redistribute it.</div><div class="line">There is NO WARRANTY, to the extent permitted by law.</div><div class="line"></div><div class="line">Secret key is available.</div><div class="line"></div><div class="line">pub  4096R/F891791F  created: 2017-05-29  expires: never       usage: SC</div><div class="line">                     trust: ultimate      validity: ultimate</div><div class="line">sub  4096R/46D4D220  created: 2017-05-29  expires: never       usage: E</div><div class="line">sub  4096R/C10AE6D4  created: 2017-05-29  expires: never       usage: A</div><div class="line">[ultimate] (1). Test User &lt;<span class="built_in">test</span>@example.com&gt;</div><div class="line"></div><div class="line">gpg&gt; toggle</div><div class="line"></div><div class="line">sec  4096R/F891791F  created: 2017-05-29  expires: never</div><div class="line">ssb  4096R/46D4D220  created: 2017-05-29  expires: never</div><div class="line">ssb  4096R/C10AE6D4  created: 2017-05-29  expires: never</div><div class="line">(1)  Test User &lt;<span class="built_in">test</span>@example.com&gt;</div><div class="line"></div><div class="line">gpg&gt; keytocard</div><div class="line">Really move the primary key? (y/N) y</div><div class="line">Signature key ....: [none]</div><div class="line">Encryption key....: [none]</div><div class="line">Authentication key: [none]</div><div class="line"></div><div class="line">Please select <span class="built_in">where</span> to store the key:</div><div class="line">   (1) Signature key</div><div class="line">   (3) Authentication key</div><div class="line">Your selection? 1</div><div class="line"></div><div class="line">You need a passphrase to unlock the secret key <span class="keyword">for</span></div><div class="line">user: <span class="string">"Test User &lt;test@example.com&gt;"</span></div><div class="line">4096-bit RSA key, ID F891791F, created 2017-05-29</div><div class="line"></div><div class="line"></div><div class="line">sec  4096R/F891791F  created: 2017-05-29  expires: never</div><div class="line">                     card-no: 0006 00000042</div><div class="line">ssb  4096R/46D4D220  created: 2017-05-29  expires: never</div><div class="line">ssb  4096R/C10AE6D4  created: 2017-05-29  expires: never</div><div class="line">(1)  Test User &lt;<span class="built_in">test</span>@example.com&gt;</div><div class="line"></div><div class="line">gpg&gt; key 1</div><div class="line"></div><div class="line">sec  4096R/F891791F  created: 2017-05-29  expires: never</div><div class="line">                     card-no: 0006 00000042</div><div class="line">ssb* 4096R/46D4D220  created: 2017-05-29  expires: never</div><div class="line">ssb  4096R/C10AE6D4  created: 2017-05-29  expires: never</div><div class="line">(1)  Test User &lt;<span class="built_in">test</span>@example.com&gt;</div><div class="line"></div><div class="line">gpg&gt; keytocard</div><div class="line">Signature key ....: 743A 2D58 688A 9E9E B4FC  493F 70D1 D7A8 13AF CE85</div><div class="line">Encryption key....: [none]</div><div class="line">Authentication key: [none]</div><div class="line"></div><div class="line">Please select <span class="built_in">where</span> to store the key:</div><div class="line">   (2) Encryption key</div><div class="line">Your selection? 2</div><div class="line"></div><div class="line">You need a passphrase to unlock the secret key <span class="keyword">for</span></div><div class="line">user: <span class="string">"Test User &lt;test@example.com&gt;"</span></div><div class="line">4096-bit RSA key, ID 46D4D220, created 2017-05-29</div><div class="line"></div><div class="line"></div><div class="line">sec  4096R/F891791F  created: 2017-05-29  expires: never</div><div class="line">                     card-no: 0006 00000042</div><div class="line">ssb* 4096R/46D4D220  created: 2017-05-29  expires: never</div><div class="line">                     card-no: 0006 00000042</div><div class="line">ssb  4096R/C10AE6D4  created: 2017-05-29  expires: never</div><div class="line">(1)  Test User &lt;<span class="built_in">test</span>@example.com&gt;</div><div class="line"></div><div class="line">gpg&gt; key 1</div><div class="line"></div><div class="line">sec  4096R/F891791F  created: 2017-05-29  expires: never</div><div class="line">                     card-no: 0006 00000042</div><div class="line">ssb  4096R/46D4D220  created: 2017-05-29  expires: never</div><div class="line">                     card-no: 0006 00000042</div><div class="line">ssb  4096R/C10AE6D4  created: 2017-05-29  expires: never</div><div class="line">(1)  Test User &lt;<span class="built_in">test</span>@example.com&gt;</div><div class="line"></div><div class="line">gpg&gt; key 2</div><div class="line"></div><div class="line">sec  4096R/F891791F  created: 2017-05-29  expires: never</div><div class="line">                     card-no: 0006 00000042</div><div class="line">ssb  4096R/46D4D220  created: 2017-05-29  expires: never</div><div class="line">                     card-no: 0006 00000042</div><div class="line">ssb* 4096R/C10AE6D4  created: 2017-05-29  expires: never</div><div class="line">(1)  Test User &lt;<span class="built_in">test</span>@example.com&gt;</div><div class="line"></div><div class="line">gpg&gt; keytocard</div><div class="line">Signature key ....: 743A 2D58 688A 9E9E B4FC  493F 70D1 D7A8 13AF CE85</div><div class="line">Encryption key....: 8D17 89A0 5C2F B804 22E5  5C04 8A68 9CC0 D742 1CDF</div><div class="line">Authentication key: [none]</div><div class="line"></div><div class="line">Please select <span class="built_in">where</span> to store the key:</div><div class="line">   (3) Authentication key</div><div class="line">Your selection? 3</div><div class="line"></div><div class="line">You need a passphrase to unlock the secret key <span class="keyword">for</span></div><div class="line">user: <span class="string">"Test User &lt;test@example.com&gt;"</span></div><div class="line">4096-bit RSA key, ID C10AE6D4, created 2017-05-29</div><div class="line"></div><div class="line"></div><div class="line">sec  4096R/F891791F  created: 2017-05-29  expires: never</div><div class="line">                     card-no: 0006 00000042</div><div class="line">ssb  4096R/46D4D220  created: 2017-05-29  expires: never</div><div class="line">                     card-no: 0006 00000042</div><div class="line">ssb* 4096R/C10AE6D4  created: 2017-05-29  expires: never</div><div class="line">                     card-no: 0006 00000042</div><div class="line">(1)  Test User &lt;<span class="built_in">test</span>@example.com&gt;</div><div class="line"></div><div class="line">gpg&gt; quit</div><div class="line">Save changes? (y/N) y</div></pre></td></tr></table></figure>
<p>当前密钥移动到 OpenPGP 卡后就没法再导出无须硬件卡就可直接使用的密钥了，如果你在上面的步骤没有导出备份密钥，那么 OpenPGP 卡里是私钥将是你唯一的私钥且没法备份。</p>
<p>查看 OpenPGP 卡状态信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">$ gpg --card-status</div><div class="line"></div><div class="line">Application ID ...: D2760001240102000060000000420000</div><div class="line">Version ..........: 2.1</div><div class="line">Manufacturer .....: Yubico</div><div class="line">Serial number ....: 00000042</div><div class="line">Name of cardholder: Test User</div><div class="line">Language prefs ...: en</div><div class="line">Sex ..............: male</div><div class="line">URL of public key : https://www.example.com/public-key.asc</div><div class="line">Login data .......: <span class="built_in">test</span></div><div class="line">Signature PIN ....: forced</div><div class="line">Key attributes ...: 4096R 4096R 4096R</div><div class="line">Max. PIN lengths .: 127 127 127</div><div class="line">PIN retry counter : 3 3 3</div><div class="line">Signature counter : 0</div><div class="line">Signature key ....: 743A 2D58 688A 9E9E B4FC  493F 70D1 D7A8 13AF CE85</div><div class="line">      created ....: 2017-05-29 22:11:07</div><div class="line">Encryption key....: 8D17 89A0 5C2F B804 22E5  5C04 8A68 9CC0 D742 1CDF</div><div class="line">      created ....: 2017-05-29 22:11:07</div><div class="line">Authentication key: 628C 7B5D D284 224A 3321  4369 BC71 9F68 F891 791F</div><div class="line">      created ....: 2017-05-29 22:11:07</div><div class="line">General key info..: pub  4096R/F891791F 2017-05-29 Test User &lt;<span class="built_in">test</span>@example.com&gt;</div><div class="line">sec&gt;  4096R/F891791F  created: 2017-05-29  expires: never</div><div class="line">                      card-no: 0006 00000042</div><div class="line">ssb&gt;  4096R/46D4D220  created: 2017-05-29  expires: never</div><div class="line">                      card-no: 0006 00000042</div><div class="line">ssb&gt;  4096R/C10AE6D4  created: 2017-05-29  expires: never</div><div class="line">                      card-no: 0006 00000042</div></pre></td></tr></table></figure>
<h2 id="6、在其他电脑上使用"><a href="#6、在其他电脑上使用" class="headerlink" title="6、在其他电脑上使用"></a>6、在其他电脑上使用</h2><p>当你配置好了一个 YubiKey 的 OpenPGP 智能卡后你可以在其他任何支持 PGP 客户端的电脑上插上 YubiKey 使用你是私钥进行签名、加密、认证操作，而不用担心私钥泄露。</p>
<p>从文件导入公钥</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gpg --import public-key.asc</div></pre></td></tr></table></figure>
<p>或者从公钥服务器上导入公钥</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gpg --keyserver keys.gnupg.net --recv 0xF891791F</div></pre></td></tr></table></figure>
<p>插入 YubiKey 查看 OpenPGP 卡信息，这一步会自动映射 YubiKey 里的私钥到 OpenPGP 的配置里。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gpg --card-status</div></pre></td></tr></table></figure>
<p>设置密钥在本系统上的信任状态</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">$ gpg --edit-key F891791F</div><div class="line"></div><div class="line">gpg (GnuPG) 1.4.21; Copyright (C) 2015 Free Software Foundation, Inc.</div><div class="line">This is free software: you are free to change and redistribute it.</div><div class="line">There is NO WARRANTY, to the extent permitted by law.</div><div class="line"></div><div class="line"></div><div class="line">pub  4096R/F891791F  created: 2017-05-29  expires: never       usage: SC</div><div class="line">                     trust: ultimate      validity: ultimate</div><div class="line">sub  4096R/46D4D220  created: 2017-05-29  expires: never       usage: E</div><div class="line">sub  4096R/C10AE6D4  created: 2017-05-29  expires: never       usage: A</div><div class="line">[ unknown] (1). Test User &lt;<span class="built_in">test</span>@example.com&gt;</div><div class="line"></div><div class="line">gpg&gt; trust</div><div class="line">pub  4096R/F891791F  created: 2017-05-29  expires: never       usage: SC</div><div class="line">                     trust: unknown      validity: unknown</div><div class="line">sub  4096R/46D4D220  created: 2017-05-29  expires: never       usage: E</div><div class="line">sub  4096R/C10AE6D4  created: 2017-05-29  expires: never       usage: A</div><div class="line">[unknown] (1). Test User &lt;<span class="built_in">test</span>@example.com&gt;</div><div class="line"></div><div class="line">Please decide how far you trust this user to correctly verify other users<span class="string">' keys</span></div><div class="line">(by looking at passports, checking fingerprints from different sources, etc.)</div><div class="line"></div><div class="line">  1 = I don't know or won<span class="string">'t say</span></div><div class="line">  2 = I do NOT trust</div><div class="line">  3 = I trust marginally</div><div class="line">  4 = I trust fully</div><div class="line">  5 = I trust ultimately</div><div class="line">  m = back to the main menu</div><div class="line"></div><div class="line">Your decision? 5  // 输入 5 设置为终极信任</div><div class="line">Do you really want to set this key to ultimate trust? (y/N) y</div><div class="line"></div><div class="line">pub  4096R/F891791F  created: 2017-05-29  expires: never       usage: SC</div><div class="line">                     trust: ultimate      validity: unknown</div><div class="line">sub  4096R/46D4D220  created: 2017-05-29  expires: never       usage: E</div><div class="line">sub  4096R/C10AE6D4  created: 2017-05-29  expires: never       usage: A</div><div class="line">[unknown] (1). Test User &lt;test@example.com&gt;</div><div class="line">Please note that the shown key validity is not necessarily correct</div><div class="line">unless you restart the program.</div><div class="line"></div><div class="line">gpg&gt; q</div></pre></td></tr></table></figure>
<p>查看系统上的密钥</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">$ gpg -k  // 查看所有的公钥</div><div class="line"></div><div class="line">~/.gnupg/pubring.gpg</div><div class="line">-----------------------------------------------</div><div class="line">pub   4096R/F891791F 2017-05-29</div><div class="line">uid       [ultimate] Test User &lt;<span class="built_in">test</span>@example.com&gt;</div><div class="line">sub   4096R/46D4D220 2017-05-29</div><div class="line">sub   4096R/C10AE6D4 2017-05-29</div><div class="line"></div><div class="line">$ gpg -K  // 查看所有的私钥</div><div class="line"></div><div class="line">~/.gnupg/secring.gpg</div><div class="line">-----------------------------------------------</div><div class="line">sec&gt;  4096R/F891791F 2017-05-29</div><div class="line">      Card serial no. = 0006 00000042  // 这里可以看出这个私钥的位置是指向 OpenPGP 智能卡的</div><div class="line">uid                  Test User &lt;<span class="built_in">test</span>@example.com&gt;</div><div class="line">ssb&gt;  4096R/46D4D220 2017-05-29</div><div class="line">ssb&gt;  4096R/C10AE6D4 2017-05-29</div></pre></td></tr></table></figure>
<p>公钥加密文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gpg -ea -r <span class="built_in">test</span>@example.com msg.txt</div></pre></td></tr></table></figure>
<p>私钥解密文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gpg msg.txt.asc</div></pre></td></tr></table></figure>
<p>文件签名</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gpg -o msg.txt.sig -ab msg.txt</div></pre></td></tr></table></figure>
<p>签名验证</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gpg --verify msg.txt.sig</div></pre></td></tr></table></figure>
<h2 id="7、重置-YubiKey-4-PGP-功能"><a href="#7、重置-YubiKey-4-PGP-功能" class="headerlink" title="7、重置 YubiKey 4 PGP 功能"></a>7、重置 YubiKey 4 PGP 功能</h2><p>新建一个 <code>reset.txt</code> 的文本文件，并写入以下内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">/hex</div><div class="line">scd serialno</div><div class="line">scd apdu 00 20 00 81 08 40 40 40 40 40 40 40 40</div><div class="line">scd apdu 00 20 00 81 08 40 40 40 40 40 40 40 40</div><div class="line">scd apdu 00 20 00 81 08 40 40 40 40 40 40 40 40</div><div class="line">scd apdu 00 20 00 81 08 40 40 40 40 40 40 40 40</div><div class="line">scd apdu 00 20 00 83 08 40 40 40 40 40 40 40 40</div><div class="line">scd apdu 00 20 00 83 08 40 40 40 40 40 40 40 40</div><div class="line">scd apdu 00 20 00 83 08 40 40 40 40 40 40 40 40</div><div class="line">scd apdu 00 20 00 83 08 40 40 40 40 40 40 40 40</div><div class="line">scd apdu 00 e6 00 00</div><div class="line">scd apdu 00 44 00 00</div><div class="line">/echo Card has been successfully reset.</div></pre></td></tr></table></figure>
<p>重置 YubiKey 4 的 OpenPGP 卡功能</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gpg-connect-agent -r reset.txt</div></pre></td></tr></table></figure>
<p>重新插拔 YubiKey 并查看 OpenPGP 卡状态信息，如果查看信息遇到错误可能是 OpenPGP 卡功能还没打开，需要通过命令手动启用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ gpg --card-status</div><div class="line"></div><div class="line">gpg: selecting openpgp failed: Card error  // OpenPGP Card 错误</div><div class="line">gpg: OpenPGP card not available: Card error</div></pre></td></tr></table></figure>
<p>启用 OpenPGP 卡功能</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">gpg-connect-agent -–hex</div><div class="line">&gt; scd apdu 00 44 00 00</div><div class="line">D[0000]  90 00                                              ..</div><div class="line">OK</div><div class="line">&gt;  // 直接回车推出</div></pre></td></tr></table></figure>
<p>手动启用 <code>OK</code> 后你可能还需要重新插拔 YubiKey 再重新查看 OpenPGP 卡状态信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">$ gpg --card-status</div><div class="line"></div><div class="line">Application ID ...: D2760001240102000060000000420000</div><div class="line">Version ..........: 2.1</div><div class="line">Manufacturer .....: Yubico</div><div class="line">Serial number ....: 00000042</div><div class="line">Name of cardholder: [not <span class="built_in">set</span>]</div><div class="line">Language prefs ...: [not <span class="built_in">set</span>]</div><div class="line">Sex ..............: unspecified</div><div class="line">URL of public key : [not <span class="built_in">set</span>]</div><div class="line">Login data .......: [not <span class="built_in">set</span>]</div><div class="line">Signature PIN ....: forced</div><div class="line">Key attributes ...: 2048R 2048R 2048R</div><div class="line">Max. PIN lengths .: 127 127 127</div><div class="line">PIN retry counter : 3 0 3</div><div class="line">Signature counter : 0</div><div class="line">Signature key ....: [none]</div><div class="line">Encryption key....: [none]</div><div class="line">Authentication key: [none]</div><div class="line">General key info..: [none]</div></pre></td></tr></table></figure>
<p>重置后的 OpenPGP 卡可以重新进行配置。</p>
<hr>
<h3 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h3><ul>
<li><a href="https://www.gnupg.org/gph/en/manual.html" target="_blank" rel="external">The GNU Privacy Handbook</a></li>
<li><a href="https://developers.yubico.com/PGP/" target="_blank" rel="external">YubiKey PGP</a></li>
<li><a href="https://www.yubico.com/support/knowledge-base/categories/articles/use-yubikey-openpgp/" target="_blank" rel="external">How to Use Your YubiKey With OpenPGP</a></li>
<li><a href="https://developers.yubico.com/yubikey-piv-manager/PIN_and_Management_Key.html" target="_blank" rel="external">PIN and Management Key</a></li>
<li><a href="https://www.yubico.com/support/knowledge-base/categories/articles/reset-applet-yubikey/" target="_blank" rel="external">How to Reset Your Applet on Your YubiKey</a></li>
<li><a href="https://developers.yubico.com/ykneo-openpgp/ResetApplet.html" target="_blank" rel="external">YubiKey ResetApplet</a></li>
<li><a href="https://openpgpcard.org/makecard/" target="_blank" rel="external">Make OpenPGP Card</a></li>
<li><a href="https://github.com/drduh/YubiKey-Guide" target="_blank" rel="external">Guide to using YubiKey as a SmartCard for GPG and SSH</a></li>
<li><a href="https://spin.atomicobject.com/2014/02/09/gnupg-openpgp-smartcard/" target="_blank" rel="external">Using an OpenPGP Smartcard with GnuPG</a></li>
<li><a href="https://www.sidorenko.io/blog/2014/11/04/yubikey-slash-openpgp-smartcards-for-newbies/" target="_blank" rel="external">Yubikey/OpenPGP Smartcards for Newbies</a></li>
<li><a href="https://www.esev.com/blog/post/2015-01-pgp-ssh-key-on-yubikey-neo/" target="_blank" rel="external">PGP and SSH keys on a Yubikey NEO</a></li>
<li><a href="https://www.jfry.me/articles/2015/gpg-smartcard/" target="_blank" rel="external">Using GPG with Smart Cards</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://www.yubico.com/&quot;&gt;YubiKey&lt;/a&gt; 是一款用于安全认证的硬件工具，其中的 YubiKey 4, YubiKey 4 Nano, YubiKey 4C, YubiKey NEO, YubiKey NEO-n，这些产品型号是包含 OpenPGP Card 功能的。&lt;/p&gt;
&lt;p&gt;你可将你的私钥移动到 YubiKey 里，在需要使用的时候插上，而不必担心私钥泄露或被恶意程序盗取，并且支持在多种操作系统上使用。&lt;/p&gt;
    
    </summary>
    
    
      <category term="YubiKey" scheme="https://znhocn.github.io/tags/YubiKey/"/>
    
      <category term="PGP" scheme="https://znhocn.github.io/tags/PGP/"/>
    
  </entry>
  
  <entry>
    <title>Diary 2017-05-26</title>
    <link href="https://znhocn.github.io/posts/2017/05/26/Diary-2017-05-26/"/>
    <id>https://znhocn.github.io/posts/2017/05/26/Diary-2017-05-26/</id>
    <published>2017-05-26T14:35:23.000Z</published>
    <updated>2017-07-10T13:57:39.738Z</updated>
    
    <content type="html"><![CDATA[<script src="/crypto-js.js"></script><script src="/mcommon.js"></script><h3 id="encrypt-message">Enter password to read.</h3><link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css"> <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap-theme.min.css"> <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script> <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> <div id="security"> <div> <div class="input-group"> <input type="text" class="form-control" aria-label="Enter the password." id="pass"/> <div class="input-group-btn"> <button type="button" class="btn btn-default" onclick="decryptAES()">Decrypt</button> </div> </div> </div> </div> <div id="encrypt-blog" style="display:none"> U2FsdGVkX19Kcef1bE94tqhI4khE07EYljxgx/VgV5pofTrMcHC/yX6mer9uZyHSu9h+p87gPRN0f+bZvP1yCt+CI0qzlnqD+/s/RqdD/T41S6tgEf2AXBDMGlDfMjoLhWxPM6S2xaiFQ4d3X720pJb97HF1aQTUr1QvAlg6gLgkpsG6Pc1/3EIt0kB93Vyw7gp1yt0jpK9HBVUA9HM4Yidn3ab2HFYn0rOxEJ964cCgyZV+RA4tic0kSOOxcR3JLNeqEFD5t8nxlER0X8JXgz1YIKfIF9/U599CwGvKYtw+zbf/PsCG2tTHCvQFTj+lT7QXx/GxkLhHuAQPhSuJ25X5sT2gU0Khgpt1kEq+9KuFF6voyaLCFuhOIrtlbh62K7zI2KPRGVMYuOutpSvXzny0fzYJS20yvbV3FjiW76hNWLSI2/ZkTYEFux9Mzb7Cw9sb4RF+cXbdi9GqDmZONewvBxmqQpBW3ek71vz4ExzzvP0pyngs+Cm4UzKCCMEZEfOr+V8svnpCYToUBZzQ2qyFjpvpDxo7gtjNEiVPeOleMm3L4JGi1/9cVAkUTQpYtWnLk/yHvZK3x4JGYlRaZxYPrEz9Z+dtKWwBxw65WVElFjOlvxd1cLD43zfOs4XZBi7wkkKlsga31YgSB6i5/IFrLRoBkD22/fOlqC0uRjnTYmQ69nUnWENSCQZYPACGoNqXmBG9uDg+6g8PtmoIwnbsf+TuxnFvt9DclrNiQ9v2zOj80pArTucBe2v0aGhQfnY2vdJDKb4qJ2sMaNIL2JJtMBs+hs39N7hNu2S1w73ooEx9/NLKyDi9vH3E2rVl/D7Q1kbvB7Dg1vVtMpx/zAGQw3pSo4OW4oKh8Rzp/eCsvDWfYDd7Js7mkdJMR5W2Fp4Z68BiuHMSguCSkn20c2cVE2gVdQLTtIPDcS9jiLKNmV342l/Xa1P1djvQYNm3FVXUFV2bcDO5yboan6ZX1qqDPrPALYlpccgIpesHQnw/EhAkOU5cRNIMt4Os+1TStAbEIxsYXthGrZMjgaKCp2zltzTa8l4SnaxVacscIgNrPwGpJwFfPWv39iAEg/O5rXvE50KCPg7InLP2IqSJvzH0nsZLt96BTJRN7uuppHGQV8rVrfdHlVE08ZglqJbpk7J8ElaXiMi7qOYEhmIj9ObGZ288wEF0yZDll7cv150= </div>]]></content>
    
    <summary type="html">
    
      The article has been encrypted, please enter your password to view.&lt;br&gt;
    
    </summary>
    
    
      <category term="Diary" scheme="https://znhocn.github.io/tags/Diary/"/>
    
  </entry>
  
  <entry>
    <title>Diary 2017-05-21</title>
    <link href="https://znhocn.github.io/posts/2017/05/21/Diary-2017-05-21/"/>
    <id>https://znhocn.github.io/posts/2017/05/21/Diary-2017-05-21/</id>
    <published>2017-05-21T12:32:36.000Z</published>
    <updated>2017-07-10T13:57:29.638Z</updated>
    
    <content type="html"><![CDATA[<script src="/crypto-js.js"></script><script src="/mcommon.js"></script><h3 id="encrypt-message">Enter password to read.</h3><link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css"> <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap-theme.min.css"> <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script> <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> <div id="security"> <div> <div class="input-group"> <input type="text" class="form-control" aria-label="Enter the password." id="pass"/> <div class="input-group-btn"> <button type="button" class="btn btn-default" onclick="decryptAES()">Decrypt</button> </div> </div> </div> </div> <div id="encrypt-blog" style="display:none"> U2FsdGVkX19AaVqiLPuKoG752Ux5vt7eeD6kIrGdkvfQP4VRfE8eE3BaknUxlv/L2/H72CYD6l1wjGpkUvmDxWlQa65yhyhLQTUj84Iuo7AgEJuxcoSz307zuM2FSxfjvOyyfHUEICIMBrp4x3l6ZFkzFa2+r9n4OqeFP7HBApUDezcyuQrc1xH3UNXo0DQJlkRMiYGO38HMU5Ab4Id6+CWesQ0yJGRspIxbKmB79oj6s5dyqXtWF5VVBInvAAFlM0VpMiOas1eJh9QSWaehrpRzjjBuKlUCCGPOSpG9xekA2p8k8ddrKXbY63ZlSoD1jjyAMknWrUs0IzSBpDlXXYOAZfPvGZ7joFthJ6qCYZG0WEHA8pClHYGRiRsPgITzrunr0hk3GJf/+B6UQftQxANyUMN1XwzJHRk72TKfUr4Ja16bAEswz8qgCG0CmD9NwR9NRuItbEx/Cu6JCrXwNOtZd6h9rciCoIfPFHQl8TBZWWZ+Xrn9iq8ToLbKxOyQFOf/z5PW+CRLPyIv5Ba5VzX9EAZsBEvZEjE+TOIPPfgSEwnngcyhdcoGucSa+hqyfUdMQC9LjVM8MjwKzR2Vxw== </div>]]></content>
    
    <summary type="html">
    
      The article has been encrypted, please enter your password to view.&lt;br&gt;
    
    </summary>
    
    
      <category term="Diary" scheme="https://znhocn.github.io/tags/Diary/"/>
    
  </entry>
  
  <entry>
    <title>YARD Stick One 使用教程</title>
    <link href="https://znhocn.github.io/posts/2017/05/17/YARD-Stick-One-Tutorial/"/>
    <id>https://znhocn.github.io/posts/2017/05/17/YARD-Stick-One-Tutorial/</id>
    <published>2017-05-17T15:27:28.000Z</published>
    <updated>2017-11-20T11:29:05.108Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://greatscottgadgets.com/yardstickone/" target="_blank" rel="external">YARD Stick One</a> 是一款 1 GHz 以下的 USB 无线收发器设备，基于 TI 的 <a href="http://www.ti.com/product/CC1110-CC1111" target="_blank" rel="external">CC1111</a> 芯片。你可以将 YARD Stick One 用于进行各种遥控信号的重放，汽车遥控锁的安全研究等。</p>
<a id="more"></a>
<ul>
<li>半双工发送和接收</li>
<li>工作频率-官方：300 - 348 MHz, 391 - 464 MHz 和 782 - 928 MHz</li>
<li>工作频率-非官方：281 - 361 MHz, 378 - 481 MHz 和 749 - 962 MHz</li>
<li>信号调制：ASK, OOK, GFSK, 2-FSK, 4-FSK, MSK</li>
<li>传输速率：500 kbps</li>
<li>全速 USB 2.0</li>
<li>SMA 母头天线连接器（50欧姆）</li>
<li>软件控制的天线端口功率（3.3 V 时最大为 50 mA）</li>
<li>低通滤波器，用于在 800 和 900 MHz 频带中工作时消除谐波</li>
<li>GoodFET 兼容的扩展和编程接口</li>
<li>GIMME 兼容编程测试点</li>
<li>开源硬件</li>
</ul>
<p>官方的工作频率是德州仪器 (TI) CC1111 芯片所支持的频率。但实际测试发现非官方的范围是可靠的，使用依旧正常。</p>
<ul>
<li>注：YARD Stick One 并不支持在 Windows 上使用，虽然有第三方尝试更改固件去支持 Windows 10 的 Linux 子系统，但目前官方并没宣布支持 Windows 系统。</li>
</ul>
<h2 id="1-使用"><a href="#1-使用" class="headerlink" title="1. 使用"></a>1. 使用</h2><p>YARD State One 并不与任何通用的 SDR 软件相兼容，你只能使用他指定的客户端 <a href="https://bitbucket.org/atlas0fd00m/rfcat" target="_blank" rel="external">RfCat</a>。</p>
<h3 id="1-1-安装-RfCat"><a href="#1-1-安装-RfCat" class="headerlink" title="1.1 安装 RfCat"></a>1.1 安装 RfCat</h3><p>从源码安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">apt-get install python-usb</div><div class="line">wget https://bitbucket.org/atlas0fd00m/rfcat/downloads/rfcat_170508.tgz</div><div class="line">tar xvzf rfcat_170508.tgz</div><div class="line"><span class="built_in">cd</span> rfcat_170508/</div><div class="line">python setup.py install</div></pre></td></tr></table></figure>
<p>Kali Linux</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apt-get install rfcat</div></pre></td></tr></table></figure>
<h3 id="1-2-RfCat-帮助"><a href="#1-2-RfCat-帮助" class="headerlink" title="1.2 RfCat 帮助"></a>1.2 RfCat 帮助</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rfcat -h</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">usage: rfcat [-h] [-r] [-i INDEX] [-s] [-f BASEFREQ] [-c INC] [-n SPECCHANS]</div><div class="line">             [--bootloader] [--force]</div><div class="line"></div><div class="line">optional arguments:</div><div class="line">  -h, --help            show this help message and exit</div><div class="line">  -r, --research        Interactive Python and the &quot;d&quot; instance to talk to</div><div class="line">                        your dongle. melikey longtime.</div><div class="line">  -i INDEX, --index INDEX</div><div class="line">  -s, --specan          start spectrum analyzer</div><div class="line">  -f BASEFREQ, --basefreq BASEFREQ</div><div class="line">  -c INC, --inc INC</div><div class="line">  -n SPECCHANS, --specchans SPECCHANS</div><div class="line">  --bootloader          trigger the bootloader (use in order to flash the</div><div class="line">                        dongle)</div><div class="line">  --force               use this to make sure you want to set bootloader mode</div><div class="line">                        (you *must* flash after setting --bootloader)</div></pre></td></tr></table></figure>
<h3 id="1-3-频谱分析"><a href="#1-3-频谱分析" class="headerlink" title="1.3 频谱分析"></a>1.3 频谱分析</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rfcat <span class="_">-s</span> <span class="_">-f</span> 433e6</div></pre></td></tr></table></figure>
<p><img src="//files.hakr.xyz/images/2017-05-17_01-0002.png" alt=""></p>
<h3 id="1-4-RfCat-命令行"><a href="#1-4-RfCat-命令行" class="headerlink" title="1.4 RfCat 命令行"></a>1.4 RfCat 命令行</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rfcat -r</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div></pre></td><td class="code"><pre><div class="line"><span class="string">'RfCat, the greatest thing since Frequency Hopping!'</span></div><div class="line"></div><div class="line">Research Mode: enjoy the raw power of rflib</div><div class="line"></div><div class="line">currently your environment has an object called <span class="string">"d"</span> <span class="keyword">for</span> dongle.  this is how</div><div class="line">you interact with the rfcat dongle:</div><div class="line">    &gt;&gt;&gt; d.ping()  // </div><div class="line">    &gt;&gt;&gt; d.setFreq(433000000)  // 设置信号频段</div><div class="line">    &gt;&gt;&gt; d.setMdmModulation(MOD_ASK_OOK)  // 设置信号调制模式</div><div class="line">    &gt;&gt;&gt; d.makePktFLEN(250)  // </div><div class="line">    &gt;&gt;&gt; d.RFxmit(<span class="string">"HALLO"</span>)  // 发送数据</div><div class="line">    &gt;&gt;&gt; d.RFrecv()  // 接收数据</div><div class="line">    &gt;&gt;&gt; <span class="built_in">print</span> d.reprRadioConfig() // 打印配置选项</div><div class="line"></div><div class="line"></div><div class="line">In [1]: <span class="built_in">print</span> d.reprRadioConfig()  // 打印配置选项</div><div class="line">== Hardware ==</div><div class="line">Dongle:              YARDSTICKONE</div><div class="line">Firmware rev:        0348</div><div class="line">Compiler:            Not found! Update needed!</div><div class="line">Bootloader:          CC-Bootloader</div><div class="line"></div><div class="line">== Software ==</div><div class="line">rflib rev:           450</div><div class="line"></div><div class="line">== Frequency Configuration ==</div><div class="line">Frequency:           901999877.929688 hz (0x259555L)</div><div class="line">Channel:             0</div><div class="line">Intermediate freq:   281250 hz</div><div class="line">Frequency Offset:    0 +/-</div><div class="line">Est. Freq Offset:    241</div><div class="line"></div><div class="line">== Modem Configuration ==</div><div class="line">Modulation:          2FSK</div><div class="line">DRate:               38360.595703 hz</div><div class="line">ChanBW:              93750.000000 hz</div><div class="line">DEVIATION:           20507.812500 hz</div><div class="line">Sync Mode:           15 of 16 bits must match</div><div class="line">M<span class="keyword">in</span> TX Preamble:     4 bytes</div><div class="line">Chan Spacing:        199951.171875 hz</div><div class="line">BSLimit:             No data rate offset compensation performed</div><div class="line">DC Filter:           enabled</div><div class="line">Manchester Encoding: disabled</div><div class="line">Fwd Err Correct:     disabled</div><div class="line"></div><div class="line">== Packet Configuration ==</div><div class="line">Sync Word:           0x0C4E</div><div class="line">Packet Length:       255</div><div class="line">Length Config:       Fixed Packet Mode</div><div class="line">Configured Address:  0x0</div><div class="line">Preamble Quality Threshold: 4 * 2</div><div class="line">Append Status:       No</div><div class="line">Rcvd Packet Check:   No address check</div><div class="line">Data Whitening:      off</div><div class="line">Packet Format:       Normal mode</div><div class="line">CRC:                 disabled</div><div class="line"></div><div class="line">== AES Crypto Configuration ==</div><div class="line">AES Mode:            CBC - Cipher Block Chaining</div><div class="line">Crypt RF Input:      off</div><div class="line">Crypt RF Output:     off</div><div class="line"></div><div class="line">== Radio Test Signal Configuration ==</div><div class="line">TEST2:               0x88</div><div class="line">TEST1:               0x31</div><div class="line">TEST0:               0x9</div><div class="line">VCO_SEL_CAL_EN:      0x0</div><div class="line"></div><div class="line">== Radio State ==</div><div class="line">     MARCSTATE:      MARC_STATE_RX (d)</div><div class="line">     DONGLE RESPONDING:  mode :c, last error<span class="comment"># 1</span></div><div class="line"></div><div class="line">== Client State ==</div><div class="line">========================================================================================================================</div><div class="line">     client thread cycles:      99/14</div><div class="line">     client errored cycles:     0</div><div class="line">     recv_queue:                (0 bytes) <span class="string">''</span></div><div class="line">     trash:                     (3 blobs) <span class="string">"[128, 142, (1495128220.831341, '')]"</span></div><div class="line">     recv_mbox                  (2 keys)  <span class="string">"['0x42', '0xff']"</span></div><div class="line">       app 0x42 (1 records)</div><div class="line">             [0x7]    (0 frames)  <span class="string">"[]"</span></div><div class="line"></div><div class="line">       app 0xff (4 records)</div><div class="line">             [0x88]    (0 frames)  <span class="string">"[]"</span></div><div class="line">             [0x80]    (0 frames)  <span class="string">"[]"</span></div><div class="line">             [0x82]    (0 frames)  <span class="string">"[]"</span></div><div class="line">             [0x86]    (0 frames)  <span class="string">"[]"</span></div><div class="line"></div><div class="line"></div><div class="line">In [2]: d.ping()</div><div class="line">PING: 26 bytes transmitted, received: <span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXYZ'</span> (0.003433 seconds)</div><div class="line">PING: 26 bytes transmitted, received: <span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXYZ'</span> (0.003278 seconds)</div><div class="line">PING: 26 bytes transmitted, received: <span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXYZ'</span> (0.003287 seconds)</div><div class="line">PING: 26 bytes transmitted, received: <span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXYZ'</span> (0.003417 seconds)</div><div class="line">PING: 26 bytes transmitted, received: <span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXYZ'</span> (0.003243 seconds)</div><div class="line">PING: 26 bytes transmitted, received: <span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXYZ'</span> (0.003240 seconds)</div><div class="line">PING: 26 bytes transmitted, received: <span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXYZ'</span> (0.003528 seconds)</div><div class="line">PING: 26 bytes transmitted, received: <span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXYZ'</span> (0.003263 seconds)</div><div class="line">PING: 26 bytes transmitted, received: <span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXYZ'</span> (0.003441 seconds)</div><div class="line">PING: 26 bytes transmitted, received: <span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXYZ'</span> (0.003416 seconds)</div><div class="line">Out[2]: (10, 0, 0.03384900093078613)</div><div class="line"></div><div class="line">In [3]: d.setFreq(433000000)  // 设置信号频段为 433 MHz</div><div class="line"></div><div class="line">In [4]: d.specan(433e6)  // 频谱分析界面，433e6 设置的是频段，这里使用的写法是科学计数法等同于 433000000</div><div class="line"></div><div class="line">In [5]: bin(0x1234f)  // 进制转换 十六进制转二进制</div><div class="line">Out[5]: <span class="string">'0b10010001101001111'</span></div><div class="line"></div><div class="line">In [6]: <span class="built_in">help</span>(d)  // 查看所有参数的帮助</div><div class="line"></div><div class="line">In [7]: d.  // 按 Tab 键，查看所有参数</div><div class="line">Display all 182 possibilities? (y or n)</div><div class="line">d.FHSSxmit                   d.getChannel                 d.mac_SyncCell               d.rf_redirection             d.setMdmNumPreamble</div><div class="line">d.RESET                      d.getChannels                d.makePktFLEN                d.rsema                      d.setMdmSyncMode</div><div class="line">d.RFcapture                  d.getCompilerInfo            d.makePktVLEN                d.runEP5_recv                d.setMdmSyncWord</div><div class="line">d.RFdump                     d.getDebugCodes              d.max_packet_size            d.runEP5_send                d.setModeIDLE</div><div class="line">d.RFlisten                   d.getEnableMdmDCFilter       d.mhz                        d.run_ctrl                   d.setModeRX</div><div class="line">d.RFrecv                     d.getEnableMdmFEC            d.nextChannel                d.scan                       d.setModeTX</div><div class="line">d.RF<span class="built_in">test</span>Long                 d.getEnableMdmManchester     d.peek                       d.send                       d.setPktAddr</div><div class="line">d.RFxmit                     d.getEnablePktAppendStatus   d.ping                       d.send_thread                d.setPktPQT</div><div class="line">d.RFxmitLong                 d.getEnablePktCRC            d.poke                       d.send_threadcounter         d.setPower</div><div class="line">d.adjustFreqOffset           d.getEnablePktDataWhitening  d.pokeReg                    d.setAESiv                   d.setRFRegister</div><div class="line">d.bootloader                 d.getFHSSstate               d.printClientState           d.setAESkey                  d.setRFbits</div><div class="line">d.calculateFsIF              d.getFreq                    d.printRadioConfig           d.setAESmode                 d.setRFparameters</div><div class="line">d.calculateFsOffset          d.getFreqEst                 d.printRadioState            d.setAmpMode                 d.setRadioConfig</div><div class="line">d.calculateMdmDeviatn        d.getFsIF                    d.radiocfg                   d.setBSLimit                 d.setRfMode</div><div class="line">d.calculatePktChanBW         d.getFsOffset                d.recv                       d.setChannel                 d.setup</div><div class="line">d.changeChannel              d.getInterruptRegisters      d.recvAll                    d.setChannels                d.setup24330MHz</div><div class="line">d.checkRepr                  d.getLQI                     d.recv_event                 d.setEnDeCoder               d.setup900MHz</div><div class="line">d.chipnum                    d.getMACdata                 d.recv_mbox                  d.setEnableCCA               d.setup900MHzContTrans</div><div class="line">d.chipstr                    d.getMACthreshold            d.recv_queue                 d.setEnableMdmDCFilter       d.setup900MHzHopTrans</div><div class="line">d.cleanup                    d.getMARCSTATE               d.recv_thread                d.setEnableMdmFEC            d.setup_rfstudio_902PktTx</div><div class="line">d.clearDebugCodes            d.getMdmChanBW               d.recv_threadcounter         d.setEnableMdmManchester     d.specan</div><div class="line">d.ctrl_thread                d.getMdmChanSpc              d.reprAESMode                d.setEnablePktAppendStatus   d.startHopping</div><div class="line">d.debug                      d.getMdmDRate                d.reprClientState            d.setEnablePktCRC            d.stopHopping</div><div class="line">d.devnum                     d.getMdmDeviatn              d.reprDebugCodes             d.setEnablePktDataWhitening  d.strobeModeCAL</div><div class="line">d.discover                   d.getMdmModulation           d.reprFreqConfig             d.setFHSSstate               d.strobeModeFSTXON</div><div class="line">d.endec                      d.getMdmNumPreamble          d.reprHardwareConfig         d.setFreq                    d.strobeModeIDLE</div><div class="line">d.ep0GetAddr                 d.getMdmSyncMode             d.reprMACdata                d.setFsIF                    d.strobeModeRX</div><div class="line">d.ep0Peek                    d.getMdmSyncWord             d.reprMdmModulation          d.setFsOffset                d.strobeModeReturn</div><div class="line">d.ep0Ping                    d.getPartNum                 d.reprModemConfig            d.setMACdata                 d.strobeModeTX</div><div class="line">d.ep0Poke                    d.getPktAddr                 d.reprPacketConfig           d.setMACperiod               d.testTX</div><div class="line">d.ep0Reset                   d.getPktLEN                  d.reprRadioConfig            d.setMACthreshold            d.trash</div><div class="line">d.ep5timeout                 d.getPktPQT                  d.reprRadioState             d.setMaxPower                d.xmit_event</div><div class="line">d.freq_offset_accumulator    d.getRSSI                    d.reprRadioTestSignalConfig  d.setMdmChanBW               d.xmit_queue</div><div class="line">d.getAESmode                 d.getRadioConfig             d.reprSoftwareConfig         d.setMdmChanSpc              d.xsema</div><div class="line">d.getAmpMode                 d.idx                        d.reset_event                d.setMdmDRate</div><div class="line">d.getBSLimit                 d.lowball                    d.resetup                    d.setMdmDeviatn</div><div class="line">d.getBuildInfo               d.lowballRestore             d.rf_configure               d.setMdmModulation</div><div class="line"></div><div class="line">In [10]: d.</div></pre></td></tr></table></figure>
<h3 id="1-5-接收信号"><a href="#1-5-接收信号" class="headerlink" title="1.5 接收信号"></a>1.5 接收信号</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="string">'RfCat, the greatest thing since Frequency Hopping!'</span></div><div class="line"></div><div class="line">Research Mode: enjoy the raw power of rflib</div><div class="line"></div><div class="line">currently your environment has an object called <span class="string">"d"</span> <span class="keyword">for</span> dongle.  this is how</div><div class="line">you interact with the rfcat dongle:</div><div class="line">    &gt;&gt;&gt; d.ping()</div><div class="line">    &gt;&gt;&gt; d.setFreq(433000000)</div><div class="line">    &gt;&gt;&gt; d.setMdmModulation(MOD_ASK_OOK)</div><div class="line">    &gt;&gt;&gt; d.makePktFLEN(250)</div><div class="line">    &gt;&gt;&gt; d.RFxmit(<span class="string">"HALLO"</span>)</div><div class="line">    &gt;&gt;&gt; d.RFrecv()</div><div class="line">    &gt;&gt;&gt; <span class="built_in">print</span> d.reprRadioConfig()</div><div class="line"></div><div class="line"></div><div class="line">In [1]: d.setFreq(433800000)  // 设置信号频段为 433.8 MHz</div><div class="line"></div><div class="line">In [2]: d.setMdmModulation(MOD_ASK_OOK)  // 设置信号调制模式为 ASK / OOK</div><div class="line"></div><div class="line">In [3]: d.setMdmDRate(4800)  // </div><div class="line"></div><div class="line">In [4]: d.setMaxPower()</div><div class="line"></div><div class="line">In [5]: d.lowball()</div><div class="line"></div><div class="line">In [6]: d.RFlisten()  // 开始监听数据</div><div class="line">Entering RFlisten mode...  packets arriving will be displayed on the screen</div><div class="line">(press Enter to stop)</div><div class="line">(1495207873.725) Received:  80004405072024210db80100080041004098760290020241482206c3b000014bc18c000000280360200b0f20281b0f60000000000088490f23d9f2004140969ea0900433f930088290b0118028e48430540183f04010843c800180008c82840004042021000000000004c640020a43c0120ec1c4010010200000606c7c012168295b50084318f00000040a028242c8e428126200481100000031c838004151a000c2080081012800081800001e40000006405c120a00928420c2c8681843040a180000000000000016c000020646c0080000084040400000000000063e0000020200909206ae1000103f68540220e5bd05a06cfa10023616b040  | ..D...$!......A.@.v....AH<span class="string">".....K.....(.`....(..`......I.#...A@.....3.0......(..0T...@..&lt;...........!.......@..C...........`l|.!h)[P.C........B..(.b.H....1.8.AQ.......(......@...@\........h.C...............F.....@@@......&gt;............?hT......l...6..@</span></div><div class="line">(1495207875.830) Received:  5322e404212004130000202300186020000000bc31842044218000120008410000100800400020000048681fb780010027008000002200002c3c9e0001008002c0c83a164240620ec5c0c61006000000000012044148740840025810c0000040039b043000000000043d8441484008488842000013e8180a6368e90b43000021200400000000000521ac50400140084200000000000014020500c87a04c01200b3c0060000040025150b2aa020000080c20a2212c00000000063e0310f7338290f63565e984840884b0f40d80a0040000002c200000008000202029252824000028604100000f750c200000000382d842003bf8400200056c0d0  | S"..!......<span class="comment">#..`.....1..D!.....A.....@....Hh.....'...."..,&lt;........:.B@b.............AHt.@.X....@...0.....=.AH@.H.B......ch..C..!........!.P@.@.B...........z...........%..*......."......c.1.s8).cV^.H@.K.@...@.............R.@........P.....8-........V..</span></div><div class="line">(1495207876.325) Received:  b1a435883185958430057439c60e10c00001000010f0000000420251400212400040ccc20050000000173d8ea1143983b0f43d8490840040a10c00020000010f20a02b17404c7b0f434801001a2c2100000000004020794f43d8da14c7d1046187258c0000008000041d8e21ec256200040402210c21eda18400400000000f23e83b0f43d87a3c218ba58422000000000c2d87a06c6d0820241d0b631821c7050800000000031763e85b0f73f0c150d610c21ee610c00783b1fcf63ec639be75c2b1<span class="built_in">fc</span>3c87b9ec2d87b0c01002063010800000000010d63e8790f43d829010118031839d843000000091<span class="built_in">fc</span>1d83b1f73d85a1ec7d0ce1ec63811f  | ..5.1...0.t9.............B.Q@..@.@...P....=...9...=....@..........+.@L&#123;.CH...,!.....@.yOC......a.%.........!.%b....!.!....@....<span class="comment">#.;.C.z&lt;!...".....-..lm..$..c.!.........c.[.s..P............&gt;.9.u...&lt;...-......0........&gt;...=.....1...0.........=...&#125;...c..</span></div><div class="line">(1495207877.241) Received:  e0240400212c0004010f3c042000000000187a0b43d8fb1fdfc8fa1ec23387688d60000000000808010004880020244c0120000029210800080000000321e86d17a1ec1d0f21e42000326520000002000020a005010020001020e40000200874802000008000080485e02011036120040021842112908400000000018fa1e43d8fa3f8e3e863087de4204000000000110000000000004f63ffe3ecf90f63a84100490882000000000043d80b998000281042985b08431e2808000000000018fe1ec3c08202c04006004280c0ee820000000000243e8790f6024550361e87b28610f790c20004000000c2d8fa1ec3b1b1fce61ec2100182063000  | .$..!,....&lt;.......z.C........3.h.`............<span class="variable">$L</span>....)!.......!.m.....!...2e....................t.............a...!.!...........=.....c.&#125;..@...........Oc.....c.A.I.......C.....(.B.[.C.(..............@..B.........$&gt;....EP6............................0.</div><div class="line">(1495207877.706) Received:  ff5f63840c81b09433801085b480000000010004048082a0048080f43fafb18c21ef829800000000060e87d0f63eced8fa1ed3c63ef63182b0b6220290863a8210101080008600a000000000000000acb0100284905000801083bfd6b0000000000650d61ec7c0f21245c01a04c0020020000000040010503c8798f43d87b1f420801007be8630000000013d0f6bf86c7d0fa1<span class="built_in">fc</span>733f4ba80282f65ac7d0f9100058b81042109614040002000010b2020480801241d082048210c3dec710000000029aed7bfb1fbe1ec2dc4218fbc841000400000047d8721e47f0f43c7b586309690000000000000001092002030120a8e10720040125a10c00  | ._c.....3...................?...!............&gt;......&gt;.1...<span class="string">"...:......................P............P......E.............P&lt;...=.........0....=.k.l&#125;...s?K....Z.....X..B...............A...............&#123;......B...A.....G.r.G..&lt;&#123;Xc.i....................%...</span></div></pre></td></tr></table></figure>
<h3 id="1-5-发送-OOK-信号"><a href="#1-5-发送-OOK-信号" class="headerlink" title="1.5 发送 OOK 信号"></a>1.5 发送 OOK 信号</h3><p>方法一</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="string">'RfCat, the greatest thing since Frequency Hopping!'</span></div><div class="line"></div><div class="line">Research Mode: enjoy the raw power of rflib</div><div class="line"></div><div class="line">currently your environment has an object called <span class="string">"d"</span> <span class="keyword">for</span> dongle.  this is how</div><div class="line">you interact with the rfcat dongle:</div><div class="line">    &gt;&gt;&gt; d.ping()</div><div class="line">    &gt;&gt;&gt; d.setFreq(433000000)</div><div class="line">    &gt;&gt;&gt; d.setMdmModulation(MOD_ASK_OOK)</div><div class="line">    &gt;&gt;&gt; d.makePktFLEN(250)</div><div class="line">    &gt;&gt;&gt; d.RFxmit(<span class="string">"HALLO"</span>)</div><div class="line">    &gt;&gt;&gt; d.RFrecv()</div><div class="line">    &gt;&gt;&gt; <span class="built_in">print</span> d.reprRadioConfig()</div><div class="line"></div><div class="line"></div><div class="line">In [1]: d.setFreq(433e6)  // 设置信号频段为 433 MHz</div><div class="line"></div><div class="line">In [2]: d.setMdmModulation(MOD_ASK_OOK)  // 设置信号调制模式为 ASK / OOK</div><div class="line"></div><div class="line">In [3]: d.setMdmDRate(int(1.0/0.000550))  // </div><div class="line"></div><div class="line">In [4]: d.RFxmit(<span class="string">"\x8E\x8E\x88\x88\x8E\x88\x88\x00\x00\x00"</span> * 20)  // 发送十六进制编码的信号 <span class="string">"\x8E\x8E\x88\x88\x8E\x88\x88\x00\x00\x00"</span> 20次</div></pre></td></tr></table></figure>
<p>方法二</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="string">'RfCat, the greatest thing since Frequency Hopping!'</span></div><div class="line"></div><div class="line">Research Mode: enjoy the raw power of rflib</div><div class="line"></div><div class="line">currently your environment has an object called <span class="string">"d"</span> <span class="keyword">for</span> dongle.  this is how</div><div class="line">you interact with the rfcat dongle:</div><div class="line">    &gt;&gt;&gt; d.ping()</div><div class="line">    &gt;&gt;&gt; d.setFreq(433000000)</div><div class="line">    &gt;&gt;&gt; d.setMdmModulation(MOD_ASK_OOK)</div><div class="line">    &gt;&gt;&gt; d.makePktFLEN(250)</div><div class="line">    &gt;&gt;&gt; d.RFxmit(<span class="string">"HALLO"</span>)</div><div class="line">    &gt;&gt;&gt; d.RFrecv()</div><div class="line">    &gt;&gt;&gt; <span class="built_in">print</span> d.reprRadioConfig()</div><div class="line"></div><div class="line"></div><div class="line">In [1]: d.setFreq(433800000)  // 设置信号频段为 433.8 MHz</div><div class="line"></div><div class="line">In [2]: d.setMdmModulation(MOD_ASK_OOK)  // 设置信号调制模式为 ASK / OOK</div><div class="line"></div><div class="line">In [3]: d.makePktFLEN(4)  // 设置包长度为 4 以为我们这里只发送 4 bytes</div><div class="line"></div><div class="line">In [4]: d.setMdmDRate(4800)  // 设置波特率</div><div class="line"></div><div class="line">In [5]: d.setMaxPower()</div><div class="line"></div><div class="line">In [6]: <span class="keyword">for</span> i <span class="keyword">in</span> range(0,15):d.RFxmit(<span class="string">'\xDE\xAD\xBE\xEF'</span>)  // 重复发送 15 次数据</div></pre></td></tr></table></figure>
<h3 id="1-6-使用-Python-脚本"><a href="#1-6-使用-Python-脚本" class="headerlink" title="1.6 使用 Python 脚本"></a>1.6 使用 Python 脚本</h3><p>Python 脚本</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/python</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># Ths is a rudimentary implementation of packet reception using YARD Stick One</span></div><div class="line"><span class="comment"># with RfCat demonstrated in Rapid Radio Reversing presented at ToorCon 17</span></div><div class="line"><span class="comment"># (2015).</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># File Name: sl.py</span></div><div class="line"><span class="comment"># usage from rfcat interactive shell:</span></div><div class="line"><span class="comment">#   %run sl.py</span></div><div class="line"><span class="comment">#   rxsl(d)</span></div><div class="line"></div><div class="line"><span class="keyword">from</span> rflib <span class="keyword">import</span> *</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"></div><div class="line"><span class="comment"># This validity check is only verifying certain bytes that are present in all</span></div><div class="line"><span class="comment"># packets.  It really should be followed up (or replaced) by a checksum</span></div><div class="line"><span class="comment"># verification.</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">packet_valid</span><span class="params">(p)</span>:</span></div><div class="line">	<span class="keyword">if</span> ord(p[<span class="number">0</span>]) != <span class="number">0x6d</span>:</div><div class="line">		<span class="keyword">return</span> <span class="keyword">False</span></div><div class="line">	<span class="keyword">if</span> ord(p[<span class="number">1</span>]) != <span class="number">0xb6</span>:</div><div class="line">		<span class="keyword">return</span> <span class="keyword">False</span></div><div class="line">	<span class="keyword">if</span> ord(p[<span class="number">6</span>]) != <span class="number">0x6d</span>:</div><div class="line">		<span class="keyword">return</span> <span class="keyword">False</span></div><div class="line">	<span class="keyword">if</span> ord(p[<span class="number">7</span>]) != <span class="number">0xb6</span>:</div><div class="line">		<span class="keyword">return</span> <span class="keyword">False</span></div><div class="line">	<span class="keyword">if</span> (ord(p[<span class="number">29</span>]) &amp; <span class="number">0xfc</span>) != <span class="number">0</span>:</div><div class="line">		<span class="keyword">return</span> <span class="keyword">False</span></div><div class="line">	<span class="keyword">return</span> <span class="keyword">True</span></div><div class="line"></div><div class="line"><span class="comment"># This could probably be simpler and/or easier to read.  It extracts every</span></div><div class="line"><span class="comment"># third bit in order to decode the pulse width modulation (PWM).  The PWM</span></div><div class="line"><span class="comment"># implemented by StealthLock is well behaved in that the pulse durations and</span></div><div class="line"><span class="comment"># interval durations are all one or two times the length of a time unit and</span></div><div class="line"><span class="comment"># data bits are represented by a consistent number (3) of time units.  This is</span></div><div class="line"><span class="comment"># the time unit I have used in the RfCat symbol rate configuration, so a long</span></div><div class="line"><span class="comment"># pulse appears as symbols (1, 1, 0) and a short pulse appears as (1, 0, 0).</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">pwm_decode</span><span class="params">(p)</span>:</span></div><div class="line">	biginteger = <span class="number">0</span></div><div class="line">	<span class="keyword">for</span> byte <span class="keyword">in</span> p:</div><div class="line">		biginteger &lt;&lt;= <span class="number">8</span></div><div class="line">		biginteger |= ord(byte)</div><div class="line">	biginteger &gt;&gt;= <span class="number">12</span></div><div class="line">	out = <span class="number">0</span></div><div class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">28</span>, (len(p)*<span class="number">8</span><span class="number">-12</span>)/<span class="number">3</span>, <span class="number">1</span>):</div><div class="line">		out &lt;&lt;= <span class="number">1</span></div><div class="line">		out |= ((biginteger &amp; <span class="number">1</span>) ^ <span class="number">1</span>)</div><div class="line">		biginteger &gt;&gt;=<span class="number">3</span></div><div class="line">	<span class="keyword">return</span> out</div><div class="line"></div><div class="line"><span class="comment"># checksum byte is 0xff minus 8-bit addition of previous bytes, like so:</span></div><div class="line"><span class="comment"># hex(0xff-(0x02+0x98+0x76+0xff+0xff)&amp;0xff)</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">rxsl</span><span class="params">(device)</span>:</span>  <span class="comment"># 函数方法</span></div><div class="line">	device.setFreq(<span class="number">314980000</span>)</div><div class="line">	device.setMdmModulation(MOD_ASK_OOK)</div><div class="line">	device.setMdmDRate(<span class="number">2450</span>)</div><div class="line">	device.setPktPQT(<span class="number">0</span>)</div><div class="line">	device.setMdmSyncMode(<span class="number">2</span>)</div><div class="line">	device.setMdmSyncWord(<span class="number">0x06db</span>)</div><div class="line">	device.setMdmNumPreamble(<span class="number">0</span>)</div><div class="line">	device.setMaxPower()</div><div class="line">	device.lowball()</div><div class="line">	device.makePktFLEN(<span class="number">30</span>)</div><div class="line"></div><div class="line">	<span class="keyword">while</span> <span class="keyword">not</span> keystop():</div><div class="line">		<span class="keyword">try</span>:</div><div class="line">			pkt, ts = device.RFrecv()</div><div class="line">			<span class="keyword">if</span> packet_valid(pkt):</div><div class="line">				<span class="comment">#print "Received:  %s" % pkt.encode('hex')</span></div><div class="line">				<span class="keyword">print</span> <span class="string">"0x%012x"</span> % pwm_decode(pkt)</div><div class="line">		<span class="keyword">except</span> ChipconUsbTimeoutException:</div><div class="line">			<span class="keyword">pass</span></div><div class="line">	sys.stdin.read(<span class="number">1</span>)</div></pre></td></tr></table></figure>
<p>在 RfCat 命令行内调用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># rfcat -r</span></div><div class="line"><span class="string">'RfCat, the greatest thing since Frequency Hopping!'</span></div><div class="line"></div><div class="line">Research Mode: enjoy the raw power of rflib</div><div class="line"></div><div class="line">currently your environment has an object called <span class="string">"d"</span> <span class="keyword">for</span> dongle.  this is how</div><div class="line">you interact with the rfcat dongle:</div><div class="line">    &gt;&gt;&gt; d.ping()</div><div class="line">    &gt;&gt;&gt; d.setFreq(433000000)</div><div class="line">    &gt;&gt;&gt; d.setMdmModulation(MOD_ASK_OOK)</div><div class="line">    &gt;&gt;&gt; d.makePktFLEN(250)</div><div class="line">    &gt;&gt;&gt; d.RFxmit(<span class="string">"HALLO"</span>)</div><div class="line">    &gt;&gt;&gt; d.RFrecv()</div><div class="line">    &gt;&gt;&gt; <span class="built_in">print</span> d.reprRadioConfig()</div><div class="line"></div><div class="line"></div><div class="line">In [1]: %run sl.py  // 运行 sl.py 脚本</div><div class="line"></div><div class="line">In [2]: rxsl(d)  // 使用脚本内的方法</div></pre></td></tr></table></figure>
<h2 id="2-rfpwnon-信号暴力穷举"><a href="#2-rfpwnon-信号暴力穷举" class="headerlink" title="2. rfpwnon 信号暴力穷举"></a>2. rfpwnon 信号暴力穷举</h2><p><a href="https://github.com/exploitagency/github-rfpwnon" target="_blank" rel="external">rfpwnon</a> 是一款基于 rfcat 实现的的无线电信号暴力穷举攻击的 Python 脚本</p>
<h3 id="2-1-安装"><a href="#2-1-安装" class="headerlink" title="2.1 安装"></a>2.1 安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">apt-get install python python-pip rfcat</div><div class="line">pip install bitstring</div><div class="line">wget https://raw.githubusercontent.com/exploitagency/github-rfpwnon/master/rfpwnon.py</div><div class="line">./rfpwnon.py --help</div></pre></td></tr></table></figure>
<h3 id="2-2-帮助信息"><a href="#2-2-帮助信息" class="headerlink" title="2.2 帮助信息"></a>2.2 帮助信息</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># ./rfpwnon.py -h</span></div><div class="line">usage: rfpwnon.py [-h] [-v] [<span class="_">-f</span> BASEFREQ] [-b BAUDRATE] [<span class="_">-l</span> BINLENGTH]</div><div class="line">                  [-r REPEATTIMES] [--keys] [-p PPAD] [-t TPAD] [--raw]</div><div class="line">                  [--tri] [--show]</div><div class="line"></div><div class="line">Application to use a rfcat compatible device to brute force a particular AM</div><div class="line">OOK or raw binary signal.</div><div class="line"></div><div class="line">optional arguments:</div><div class="line">  -h, --help      show this <span class="built_in">help</span> message and <span class="built_in">exit</span>  // 显示帮助信息</div><div class="line">  -v, --version   show program<span class="string">'s version number and exit  // 显示软件版本</span></div><div class="line">  -f BASEFREQ     Specify the target frequency to transmit on, default is  // 指定信号频段，默认为 915000000 Hz</div><div class="line">                  915000000.</div><div class="line">  -b BAUDRATE     Specify the baudrate of the signal, default is 2000.  // 指定波特率，默认为 2000</div><div class="line">  -l BINLENGTH    Specify the binary length of the signal to brute force. By  // 指定要生成的二进制长度</div><div class="line">                  default this is the binary length before pwm encoding. When</div><div class="line">                  the flag --raw is set this is the binary length of the pwm</div><div class="line">                  encoded signal.</div><div class="line">  -r REPEATTIMES  Specify the number of times to repeat the signal. By default  // 指定一个信号重复的次数</div><div class="line">                  this is set to 1 and uses the de bruijn sequence for speed.   // 当设为 1 时使用 de bruijn 序列的速度</div><div class="line">                  When set greater than one the script sends each possible      // 当设置大于 1 时脚本会花费更多的时间去执行</div><div class="line">                  permutation of the signal individually and takes much longer</div><div class="line">                  to complete. For some applications the signal is required to</div><div class="line">                  be sent multiple times.</div><div class="line">  --keys          Displays the values being transmitted in binary, hex, and  // 显示正在传输的二进制，十六进制和十进制值</div><div class="line">                  decimal both before and after pwm encoding.</div><div class="line">  -p PPAD         Specify your own binary padding to be attached before the  // 指定要附加在所生成二进制之前的固定二进制值</div><div class="line">                  brute forced binary.</div><div class="line">  -t TPAD         Specify your own binary padding to be attached after the  // 指定要附加在所生成二进制之后的固定二进制值</div><div class="line">                  brute forced binary.</div><div class="line">  --raw           This flag disables the script from performing the pwm</div><div class="line">                  encoding of the binary signal. When set you must specify the</div><div class="line">                  full pwm encoded binary length using -l.</div><div class="line">  --tri           This flag sets up the script to brute force a trinary</div><div class="line">                  signal.</div><div class="line">  --show          Prints de Bruijn sequence before transmitting.  // 显示 de Bruijn 序列</div></pre></td></tr></table></figure>
<h3 id="2-3-使用实例"><a href="#2-3-使用实例" class="headerlink" title="2.3 使用实例"></a>2.3 使用实例</h3><p>指定波特率为 <code>2000</code> 生成 <code>4</code> 位长的所有二进制信号，每个信号重复发送 <code>5</code> 次</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./rfpwnon.py <span class="_">-f</span> 315000000 -b 2000 <span class="_">-l</span> 4 -r 5</div></pre></td></tr></table></figure>
<p>指定波特率为 <code>1818</code> 每个信号的开头的二进制编码为 <code>100101</code> 在其之后生成 <code>10</code> 为长的所有二进制信号，每个信号重复发送 <code>2</code> 次</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./rfpwnon.py <span class="_">-f</span> 315060000 -b 1818 -p 100101 <span class="_">-l</span> 10 -r 2</div></pre></td></tr></table></figure>
<p>指定波特率为 <code>1818</code> 生成 <code>16</code> 为长的所有二进制信号，每个信号重复发送 <code>2</code> 次。这会花费很多时间来发送完所有的信号。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./rfpwnon.py <span class="_">-f</span> 315060000 -b 1818 <span class="_">-l</span> 16 -r 2</div></pre></td></tr></table></figure>
<h2 id="3-ToorChat"><a href="#3-ToorChat" class="headerlink" title="3. ToorChat"></a>3. ToorChat</h2><p><a href="https://github.com/hathcox/ToorChat" target="_blank" rel="external">ToorChat</a> 是一款使用 <a href="https://greatscottgadgets.com/tc13badge/" target="_blank" rel="external">ToorCon 2013 徽章</a>的聊天应用程序。<br>YARD State One 的硬件设计上与 ToorCon 2013 badge 使用的芯片与固件是一样的，所以这程序也是可以通用的。<br>ToorChat 聊天工具使用时需要至少两个 RfCat 支持的硬件才能通过无线电正常通信。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">clone</span> https://github.com/hak5/ToorChat.git</div><div class="line"><span class="built_in">cd</span> ToorChat</div><div class="line">./toorchat.py</div></pre></td></tr></table></figure>
<p><img src="//files.hakr.xyz/images/2017-05-17_01-0003.png" alt=""></p>
<h2 id="4-固件"><a href="#4-固件" class="headerlink" title="4. 固件"></a>4. 固件</h2><p>YARD Stick One 的固件就是 <a href="https://bitbucket.org/atlas0fd00m/rfcat" target="_blank" rel="external">rfcat</a> 提供的，Bootloader 使用的是 <a href="https://github.com/AdamLaurie/CC-Bootloader" target="_blank" rel="external">CC-Bootloader</a>。固件和硬件是开源的，你可以自己编写固件实现你需要的功能。</p>
<hr>
<h2 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h2><ul>
<li><a href="http://greatscottgadgets.com/yardstickone/" target="_blank" rel="external">Great Scott Gadgets - YARD Stick One</a></li>
<li><a href="https://github.com/greatscottgadgets/yardstick" target="_blank" rel="external">GitHub: YARD Stick One</a></li>
<li><a href="https://bitbucket.org/atlas0fd00m/rfcat" target="_blank" rel="external">rfcat project</a></li>
<li><a href="https://andrewmohawk.com/2012/09/06/hacking-fixed-key-remotes/" target="_blank" rel="external">Hacking fixed key remotes</a></li>
<li><a href="http://andrewmohawk.com/2015/08/31/hacking-fixed-key-remotes-with-only-rfcat/" target="_blank" rel="external">Hacking fixed key remotes with (only) RFCat</a></li>
<li><a href="https://www.youtube.com/watch?v=pkTlTCUeec0" target="_blank" rel="external">How to begin hacking with the YARD Stick One - Hak5 1908</a></li>
<li><a href="https://www.youtube.com/watch?v=F3bISk5t8cA" target="_blank" rel="external">How to Hack Wireless Remotes with Radio Replay Attacks - Hak5 1909</a></li>
<li><a href="https://www.youtube.com/watch?v=EZU2AZtfJbI" target="_blank" rel="external">Hacking Wireless Doorbells and Software Defined Radio tips - Hak5 1910</a></li>
<li><a href="https://www.youtube.com/watch?v=LqmVaf2KHYA" target="_blank" rel="external">Hacking Keyless Entry Remotes - Hak5 1911</a></li>
<li><a href="https://www.youtube.com/watch?v=blpycY5JCm0" target="_blank" rel="external">How to Hack Radio with Brute Force Attacks - Hak5 1912</a></li>
<li><a href="https://www.youtube.com/watch?v=eVqIe3na_Zk" target="_blank" rel="external">Radio Hacking: Reverse Engineering Protocols Part 1 - Hak5 1913</a></li>
<li><a href="https://www.youtube.com/watch?v=vf38-8LbDuw" target="_blank" rel="external">Radio Hacking: Reverse Engineering Protocols Part 2 - Hak5 1914</a></li>
<li><a href="https://pandwarf.com/news/yard-stick-one-vs-rtl-sdr-vs-pandwarf/" target="_blank" rel="external">Yard Stick One vs RTL-SDR vs PandwaRF: Fight of the dwarves</a></li>
<li><a href="http://greatscottgadgets.com/2015/12-29-rapid-radio-reversing-toorcon-2015/" target="_blank" rel="external">Rapid Radio Reversing, ToorCon 2015</a></li>
<li><a href="https://github.com/gyaresu/opensesame-yardstick" target="_blank" rel="external">opensesame-yardstick</a></li>
<li><a href="https://www.hak5.org/episodes/hak5-1908-how-to-begin-hacking-with-the-yard-stick-one" target="_blank" rel="external">Hak5 1908 – How to begin hacking with the YARD Stick One</a></li>
<li><a href="http://leetupload.com/blagosphere/index.php/2014/02/16/you-know-how-to-send-my-signal-setting-up-rfcat-from-scratch/" target="_blank" rel="external">You know how to send my signal — Setting up RFCat from scratch</a></li>
<li><a href="https://www.legacysecuritygroup.com/index.php/categories/13-sdr/22-rfpwnon-py-the-ultimate-rfcat-ask-ook-brute-force-tool" target="_blank" rel="external">rfpwnon.py rfcat ASK OOK brute force tool</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://greatscottgadgets.com/yardstickone/&quot;&gt;YARD Stick One&lt;/a&gt; 是一款 1 GHz 以下的 USB 无线收发器设备，基于 TI 的 &lt;a href=&quot;http://www.ti.com/product/CC1110-CC1111&quot;&gt;CC1111&lt;/a&gt; 芯片。你可以将 YARD Stick One 用于进行各种遥控信号的重放，汽车遥控锁的安全研究等。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Hardware" scheme="https://znhocn.github.io/tags/Hardware/"/>
    
      <category term="Radio" scheme="https://znhocn.github.io/tags/Radio/"/>
    
      <category term="YARD Stick One" scheme="https://znhocn.github.io/tags/YARD-Stick-One/"/>
    
  </entry>
  
  <entry>
    <title>Diary 2017-05-13</title>
    <link href="https://znhocn.github.io/posts/2017/05/13/Diary-2017-05-13/"/>
    <id>https://znhocn.github.io/posts/2017/05/13/Diary-2017-05-13/</id>
    <published>2017-05-13T08:30:26.000Z</published>
    <updated>2017-07-10T13:57:23.540Z</updated>
    
    <content type="html"><![CDATA[<script src="/crypto-js.js"></script><script src="/mcommon.js"></script><h3 id="encrypt-message">Enter password to read.</h3><link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css"> <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap-theme.min.css"> <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script> <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> <div id="security"> <div> <div class="input-group"> <input type="text" class="form-control" aria-label="Enter the password." id="pass"/> <div class="input-group-btn"> <button type="button" class="btn btn-default" onclick="decryptAES()">Decrypt</button> </div> </div> </div> </div> <div id="encrypt-blog" style="display:none"> U2FsdGVkX19TYULuZeMV2tLvI2ibV4Q21C/EGDsHnepo6gEUCuuEiNSoaGmAb9P0Kczh33khjORMW2OTyP7Dn0/C/Rem6FQAzSyUTs9PfpDod7vvPnGTkEH7BFArY73T5whRhh94jqdHgKkQ42sN2Y7qwuDU2w2RZtp+yTi/C8LV1HK1KFoP9kxduTvjJ70lJKJLGJNDsEByxnD5W05Dnr8oosUb/hJfFTDXkTc2ireoVR/0uOx1IKFgZK47QrN7a/dyuaz+HfYZTHPeBHYYxx/akU65t8bISHQrIoYmXm3uDqK1h6JRFvEJVZVP/elgo/RGxLOxgs3sTh64UZoF/A8xPXtQjh7LLH9NoowcCMskzXr/Jl7JEiBMZEYb1wJFmjx0VyVA0kSQ7bpxs9nLMmH0f1m6aRqtOqlRFFG9tzQg0E2tcbNRUYtevb3jH3cV7FuLJJ3jGOM0jHJ8skq+IEtwrQ3+0ysGDJyrjg9wqWh+ayS0Ncx+MaMxHmsV6WBQA80gbVV1lci2gOydUTXYUIT2tdLmceqRcwpkoOSGPm2/4iovX08hZXUwecCZZu3h2Yrs8bEjH/sG/F7yIP2JVjgFwevckJDHTqwRsAEtc+1BK44VE6kHwI6EMI/BsMz1McwTwsARGxKHzjOXh887dJFIZzn3AcBfGyYu/xXCSFIsr7kwcVch8hGgJoGb/kp3KnVoT2hrtzxmpcwh5124tNWZZP/kjAopapUNaWeySW42dBd/pzKWaIhIefMsgbnNsyy/+GgeOBLIotecoWOJxA== </div>]]></content>
    
    <summary type="html">
    
      The article has been encrypted, please enter your password to view.&lt;br&gt;
    
    </summary>
    
    
      <category term="Diary" scheme="https://znhocn.github.io/tags/Diary/"/>
    
  </entry>
  
  <entry>
    <title>Diary 2017-05-04</title>
    <link href="https://znhocn.github.io/posts/2017/05/04/Diary-2017-05-04/"/>
    <id>https://znhocn.github.io/posts/2017/05/04/Diary-2017-05-04/</id>
    <published>2017-05-04T08:13:05.000Z</published>
    <updated>2017-07-10T13:57:10.148Z</updated>
    
    <content type="html"><![CDATA[<script src="/crypto-js.js"></script><script src="/mcommon.js"></script><h3 id="encrypt-message">Enter password to read.</h3><link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css"> <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap-theme.min.css"> <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script> <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> <div id="security"> <div> <div class="input-group"> <input type="text" class="form-control" aria-label="Enter the password." id="pass"/> <div class="input-group-btn"> <button type="button" class="btn btn-default" onclick="decryptAES()">Decrypt</button> </div> </div> </div> </div> <div id="encrypt-blog" style="display:none"> U2FsdGVkX18s7fOwZ+X+1ykW9lssZbcd3yKJblQuWqILc3A2lIbzFEnp3fTRRqMnok3jAckP4sWXEwvmo3qO/el2eo+Uf4Qz9Z9CqIYrTp5I0z3CyNzwcZMT0FAdbyZV </div>]]></content>
    
    <summary type="html">
    
      The article has been encrypted, please enter your password to view.&lt;br&gt;
    
    </summary>
    
    
      <category term="Diary" scheme="https://znhocn.github.io/tags/Diary/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://znhocn.github.io/posts/2017/01/01/hello-world/"/>
    <id>https://znhocn.github.io/posts/2017/01/01/hello-world/</id>
    <published>2016-12-31T17:01:01.000Z</published>
    <updated>2017-06-22T02:34:34.935Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.<br><a id="more"></a></p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot;&gt;GitHub&lt;/a&gt;.&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Annual summary 2016</title>
    <link href="https://znhocn.github.io/posts/2016/12/30/Annual-summary-2016/"/>
    <id>https://znhocn.github.io/posts/2016/12/30/Annual-summary-2016/</id>
    <published>2016-12-30T13:04:25.000Z</published>
    <updated>2017-12-29T14:39:18.904Z</updated>
    
    <content type="html"><![CDATA[<script src="/crypto-js.js"></script><script src="/mcommon.js"></script><h3 id="encrypt-message">Please enter the password to read the blog.</h3><link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css"> <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap-theme.min.css"> <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script> <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> <div id="security"> <div> <div class="input-group"> <input type="text" class="form-control" aria-label="Enter the password." id="pass"/> <div class="input-group-btn"> <button type="button" class="btn btn-default" onclick="decryptAES()">Decrypt</button> </div> </div> </div> </div> <div id="encrypt-blog" style="display:none"> U2FsdGVkX18+OURhaywVvhjmkqUL8EC12RWZITkm24bU8B/VvA2Hl7chInCuet1L6BxvJK4cIVOlYP3iBZWWdOGZka5/CDZ+cl06fzczkJcL6C3QtXVDe+vLXFlbtZdAlvLIJnCBFTAadXX9BQ7KfDRxj29jmFJnGURpbxE1T5W72tZwnPYXQ1Ndd8tdunk137axLYipTfy5TNPnv1Z+kr2EZRTUGyOyREfz1mBHBM5BvvhvwcMI5ArIHyAQFEzYOUogZ6XxaBVpLhV+PgAS2Ko9bzfDvj88DytwVzZQFsuvJiLSMP1/FyGqIIBMb/zZD9CCHkKmm8sSpLY3ohwAIJ/giNvQjpJrPatbNC4LuuaqD1eYROht3LIHTCKF2SpPlszQewMpZoCbpHRn6v+K0XxZtUHw1FuMAra+4y7oHQrnBSgr7S7/x+l0Sw2BTkWJlFBQiKi1xh8yAoekz/3lPIR43DJEPsgAYzCUZE4fflcsDaaaFZEbwrEcATAvIwBLr65ptXvbT2EZ7MVgSVRwhzXm9eIX3Z8hWZNOQdFjZTxMs+tBfs8iZmhTMV5GdPT70skB8T+Njr6WOQfKFJHm18cd7zFl3c/GUpUxpEbxtqqlV/3WoNL+NSj3sO/MBmpaLUFgtL2k+Bn4SYuz0b90YwEKSayPE0SLm/3SH3koMVE2wptSyNJhj1VDcmRQpB5jmrUyA7durFAC18AWYatRJq/16X//I9vuzl9e1Z869sOwczA3VsApkfy+CVNr1Fc381rDeTFyYRx9pdlgK5KP6vnLK47hSN2bHSQwvcFnI7YKpO2Os7O8EjOyIIrj3UTH/7O74MrhNb3bOmpD3iLTrO/iR3bC6l/ffjYjP1/j+PdAlQNBsMm4F+6OQIMshRluSfDkfvYL/s/8Bfxoz+RSAl3+RWE0v4d/W3yZrT9fWXEjI2ZTa4F3MwB4phJHTWbTggLLbYwOx0wq7uQCDacFUydQMmzpdG9gCbZAphru/JGBZhwOALmdouJtb7kR8D+AZaM16KNiexc/zuxvgzuq14FlDFU8IHB9D1yxBjJ1BCisZk4E50kSt2rmmbQVWOeWPzQbyzl4VkuUMfn+0uYK4Aahih9b/7wEpFfk5rwkTysYSaw6vD8XQf1CcIufxkdscYNYcQ1ioWXT+VBzBOoyHdBgogwjH+sIc0WjcSKrQZJOIgUG8dshgTli4AAayVrmqfS5PjxG+J1nJqnGjBzj+QyycINxWG5fGR4NVEkqN+RFTMO3uUZiD5DVCFJVbXRQXH3pNVSjPv+VCUp0ptWFLCqDr21ni7PHPEHMzdzSuFN46KbiY4ttEMOqY9RJlnn1mVtoGalwZsa+dHT/L1+qtF83MoikcQiH0omALftNF2FeVwA7QwNw/+r9Fj8s943VEBAKd6/+oDfJkSra+vJcPjl2eWBDBgsjdPjb2FNgCyPnvT6kMGqAF8rnPhvXpQc5LjBffp7zBsAR65hn6KlqokaidfcNJ0yllSXsfuqCVrPvVHUILkmphoR4Awr245WcnwMHvArxuPWODSelzg4n/CgmHRxuMXNVeIxrZ54tvZTsFrtzzVsDMO8N17X7XNHkq0dkQF5PBz6P2zlecual9XgBGFMAm45hOQqSgJlDZDKAlhrCLJgBcr0uA+v+UqPWmxAjdySnd5rHPjCbp7fESBohGHW7ANNVO78HU4n29GvhYLgvZ47kQ59Bfn86i0SK62Jqr6Eq9QjVh4S+SiDRXUJC2Gto1uAT80f1vcp8o8YN7sPEe3lyB0m2ofIAOv3Ah1xlFuJ49ycxTJaC+Gh4BB2jmPePXuJMWcCltHuBGtcGU3ShEChnekbZi/OUFD6x3kE+Lq9w2i7RvNRgesAiGHJiPNw0MEnO+p5HNBfqLFNlITSpHaHdjIUVowqxRCUk01rOmPZHj29/qAvER1vIvJHKrR8ryP/T9kzQnS7dYzVRFDNRiajHIAmyieDvUtcRaXN69mnOplsT0RxhRzAbL9sRrjRr5WdNJ/afMsmgmIQcG2qa7gaV2yw77tOHBmV2bgiLEq3yQnlKN9EPJGhauy6Dmiwtn0hDBfQzrCnTnm0o4kPJN6GXDqLxhhPNQNp9DzeAAgYk1ceL9nDvGDTBgad1839gGYTcsye0hNfCdh872dG8hVCNSDxEGNXF549gt0ha6F7q0W6yAx29hvqYphnkhi+wo1bjkM2QltayBsbRxRb6rKyOnBizYNs+YhYWKypbqZHaJAEdBpnP96R0n43KsfNWLP21d7B8xu6OwVgU1T2h9jQ4boiEcqODLYozTPYjOxqbJpDz68Q71zsK+SXMPzEqV1mPUncDu/D28zWqLOT1CKDHF2nSaN0QXOJQaRsHbULlasR3bl4jigAtL/bVKydh3uIQs69xqxsbbWDjUSZz+Jmq/S5xCps352cSfJB7cZErXf9Y6g6XPm0Um7DYIszv9YLveQWTJq6ixJv3CjiN5C74cBg59GQVRoy0OfJ4CDnZkEAwbmx/ZuLQZXsW6u4lbbDUddRv9FG9RTdJKOx4UQDIVN2aiftUbIH/isRcSaElAFc0m0XJFs0VascJLw0+Hc+eyHiEdnMwaNHIw29Fd5kfQbjrrwruTrszEmH0E/pJUJmD/ux6qBn/ujn6SiEyPoBfqPy/falbrXgooujemuPXEBWC+F3/O9K7jRxiz7OlPbDIvZxB0/hn4yoYb43n/JuCJCjI4fIMhdYNhCanBlqGPjGWnIi0G4EG2B80vL+oby1ULLH0tXgT+dxuXd4rWK/9OHdLApJd/m9NCCTIdIgyfihytcf26mKkNLN76wJuxHywpN/aZcdQbciySgHqS2H/hWnMhqQuczOqDjpZn6unIxeOJzAFiPUyOEnvNUXhAu2fg+J1hlFHwffg5WLO4j21pokuKDyXm9FL60XxmcyRP4s4rPEtpM3SF3rdqbYXOLedyrbk1AM4oQ/dr7psiRNWWMYQafSFjA1zi3QFS1h6QuVBZAhd7rcmrpuZlpaN6/Jgb0XxnE3xrEUyOGzd+fxcBnRpyyQJ3s1k7kggy26szlW3be8ci5pNiAqSVCAYL0sM20dOx9r2DiRL9Haj8zOmie5WrKoD163+Wxun2X4wHAw7giQLteFYRT7YShjyAte2a5x9TGwNbj9eSRPCYhUG25i2rxIxYOteJ8QeugDnBlqUdt7I8L/WjmYlg2uRYYFe1Zjm9jX5u5mVvzjvXiIYPcprUpbMwUCMavVKlNBymO2mdffKy0WB0QUtPhiglOxNQnHsuBH6BDnwaWSTUNlYM4+/abIfieKm4c/qOEo40asW/dRNXbBjJImjMa7oJgbCMsGHALc6yeesTaYjftqVL9loJtUN36AK/RbyXCpfYZjbq8N1rOFcaFsAhc3ELF6tEijyHZqC9XXpEX18lXIpLrBlkMXNh6kAIUS3m9pJ+I87C8kAzcrGSoPidaR0U4MaVGzI2lDjP2LzKyqv944MNBSdkaO3JhWnF3WfHsKD7+3EoJt9xClcT8U0GanBEt2dN52DDRiAIVsYTIYwdB4mj6A3UgygTPfCgZ3EVLDN768ErnZLQ1MEOpZSl3n5Nm6xS3eoakCCSwZx5Ea/snLF8IS3NIPDqIcbK7pWW2nTfgt+r24l7AUyfOaL2rKSjLfyajmkKqek+jUyPLVto3tpI7siX82MS102TjgxeqbRB7gCVQgbQdtLpb480fuInTCiZ+S0IcWpvw== </div>]]></content>
    
    <summary type="html">
    
      The article has been encrypted, please enter your password to view.&lt;br&gt;
    
    </summary>
    
    
      <category term="Annual summary" scheme="https://znhocn.github.io/tags/Annual-summary/"/>
    
  </entry>
  
</feed>
